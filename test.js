"use strict";(function(){'use strict';angular.module('pclenderApp',['ui.bootstrap','b2b.home.pipeline','b2b.home.loanOfficerSection','common.lib.modal','b2b.home.tpo.contactInfo','b2b.home.tpo.interfaceCredentials','b2b.home.tpo.userList','b2b.home.tpo.changePassword']).config(['$qProvider',function($qProvider){$qProvider.errorOnUnhandledRejections(false);}]);})();(function(){'use strict';angular.module('b2b.home.loanOfficerSection',[]);})();(function(){'use strict';angular.module('b2b.home.pipeline.expirePassword',[]);})();(function(){'use strict';angular.module('b2b.home.pipeline',['b2b.home.pipeline.printPipeline','b2b.home.pipeline.expirePassword']);})();(function(){'use strict';angular.module('b2b.home.pipeline.printPipeline',[]);})();(function(){'use strict';angular.module('b2b.home.tpo.changePassword',[]);})();(function(){'use strict';angular.module('b2b.home.tpo.contactInfo',[]);})();(function(){'use strict';angular.module('b2b.home.tpo.interfaceCredentials',[]);})();(function(){'use strict';angular.module('b2b.home.tpo.statusForm',[]);})();(function(){'use strict';angular.module('b2b.home.tpo.submit',[]);})();(function(){'use strict';angular.module('b2b.home.tpo.userForm',[]);})();(function(){'use strict';angular.module('b2b.home.tpo.userList',['b2b.home.tpo.userForm','b2b.home.tpo.statusForm','b2b.home.tpo.submit']);})();(function(){'use strict';//Dropzone.autoDiscover = false;
angular.module('common.lib.image_upload.dropBoxUploader',[]);})();(function(){'use strict';angular.module('common.lib.image_upload',['thatisuday.dropzone','common.lib.image_upload.imageUploader','common.lib.image_upload.uploadLogs','common.lib.image_upload.dropBoxUploader']);})();(function(){'use strict';angular.module('common.lib.image_upload.imageUploader',[]);})();(function(){'use strict';angular.module('common.lib.image_upload.uploadLogs',[]);})();(function(){'use strict';angular.module('common.lib.image_viewer.imageViewer',[]);})();(function(){'use strict';angular.module('common.lib.lookup.company',['common.lib.pagination']);})();(function(){'use strict';angular.module('common.lib.lookup',['common.lib.lookup.company','common.lib.lookup.programs']);})();(function(){'use strict';angular.module('common.lib.lookup.programs',[]);})();(function(){'use strict';angular.module('pclender.lib.modal.alert',[]);})();(function(){'use strict';angular.module('pclender.lib.modal.confirm',[]);})();(function(){'use strict';angular.module('pclender.lib.modal.loading',[]);})();(function(){'use strict';angular.module('common.lib.modal',['pclender.lib.modal.loading','pclender.lib.modal.confirm','pclender.lib.modal.alert']);})();(function(){'use strict';angular.module('common.lib.pagination',[]);})();(function(){'use strict';angular.module('common.lib.radiobutton',[]);})();(function(){'use strict';angular.module('pclenderApp').controller('AlertController',AlertController).directive('alertModal',function(){return{restrict:'E',scope:{},controller:'AlertController',controllerAs:'vm',templateUrl:'../../media/ng/lib/alert/alert.html'};});AlertController.$inject=['$scope','$timeout','CommonService'];function AlertController($scope,$timeout,CommonService){var vm=this;vm.static_files=STATIC_FILES;$scope.showAlert=showAlert;$scope.hideAlert=hideAlert;CommonService.showAlert=showAlert;CommonService.hideAlert=hideAlert;function showAlert(title,msg){vm.msg=msg;vm.title=title;$timeout(function(){$scope.$apply();$('#myAlertModal').modal('show');});}function hideAlert(){$('#myAlertModal').modal('hide');}}})();(function(){'use strict';angular.module('pclenderApp').controller('ConfirmController',ConfirmController).directive('confirmModal',function(){return{restrict:'E',scope:{},controller:'ConfirmController',controllerAs:'vm',templateUrl:'../../media/ng/lib/confirm/confirm.html'};});ConfirmController.$inject=['$scope','$timeout','CommonService'];function ConfirmController($scope,$timeout,CommonService){var vm=this;vm.static_files=STATIC_FILES;$scope.showConfirm=showConfirm;$scope.hideConfirm=hideConfirm;CommonService.showConfirm=showConfirm;CommonService.showConfirmWithOptions=showConfirmWithOptions;CommonService.hideConfirm=hideConfirm;vm.afterYes=null;vm.afterNo=null;vm.yesLabel='Yes';vm.noLabel='No';vm.clickYes=function(){if(vm.afterYes){vm.afterYes();}};vm.clickNo=function(){if(vm.afterNo){vm.afterNo();}};function showConfirm(title,msg,yesFunc,noFunc){vm.msg=msg;vm.title=title;vm.afterYes=yesFunc;vm.afterNo=noFunc;vm.yesLabel='Yes';vm.noLabel='No';$timeout(function(){$scope.$apply();$('#myConfirmModal').modal('show');});}function showConfirmWithOptions(options){vm.msg=options.msg;vm.title=options.title;vm.afterYes=options.yesFunc;vm.afterNo=options.noFunc;vm.yesLabel=options.yesLabel;vm.noLabel=options.noLabel;$timeout(function(){$scope.$apply();$('#myConfirmModal').modal('show');});}function hideConfirm(){$('#myConfirmModal').modal('hide');}}})();(function(){'use strict';var whiteListRegEx=/[^a-zA-Z0-9\s\_\,\.\-\&\?\!\(\)\$\#\%\/\'\@\:\[\]\>]+/g;var whiteListRegExNumeric=/[^0-9]+/g;var whiteListRegExURLName=/[^a-zA-Z0-9\_]+/g;var whiteListRegExEmail=/[^a-zA-Z0-9\@\.\!\#\$\%\&\'\*\+\\\/\=\?\^\_\`\{\|\}\~\-]+/g;var skipKeys=['ArrowLeft','ArrowRight','Backspace','Delete','Shift','Home','End'];angular.module('pclenderApp').directive('iframeOnload',[function(){return{scope:{callBack:'&iframeOnload'},link:function link(scope,element){element.on('load',function(){return scope.callBack();});}};}]).directive('imageOnLoad',[function(){return{restrict:'A',link:function link(scope,element,attrs){element.bind('load',function(){scope.$apply(attrs.imageOnLoad);});}};}]).directive('pclDraggable',function(){return{scope:{onDragDrop:'&',onDragEnter:'&',onDragLeave:'&'},link:function link(scope,element){var el=element[0];el.addEventListener('drop',function(e){scope.onDragDrop({event:e});return false;},false);el.addEventListener('dragenter',function(e){scope.onDragEnter({event:e});return false;},false);el.addEventListener('dragleave',function(e){scope.onDragLeave({event:e});return false;},false);}};}).directive('tooltip',function(){return{restrict:'A',link:function link(scope,element){$(element).hover(function(){$(element).tooltip('show');},function(){$(element).tooltip('hide');});}};}).directive('popover',function(){return{restrict:'A',link:function link(scope,element){$(element).popover({placement:'top',html:true,container:'body',trigger:'hover'});}};}).directive('mask',function(){return{restrict:'A',link:function link(scope,element,attrs){if(attrs.mask==='currency'){$(element).inputmask('decimal',{removeMaskOnSubmit:true,digits:2,digitsOptional:false,rightAlign:false,radixPoint:'.',autoGroup:true,groupSeparator:',',groupSize:3,prefix:'$','placeholder':'0'});$(element).attr('maxlength',15);}else if(attrs.mask==='currency-no-decimal'){$(element).inputmask('decimal',{removeMaskOnSubmit:true,digits:0,digitsOptional:false,rightAlign:false,radixPoint:'.',autoGroup:true,groupSeparator:',',groupSize:3,prefix:'$','placeholder':'0'});$(element).attr('maxlength',15);}else if(attrs.mask==='percentage'){$(element).inputmask('decimal',{removeMaskOnSubmit:true,digits:2,digitsOptional:false,rightAlign:false,radixPoint:'.',autoGroup:true,groupSeparator:',',groupSize:3,suffix:'%','placeholder':'0'});$(element).attr('maxlength',6);}else if(attrs.mask==='percentage-3digits-nosuffix'){$(element).inputmask('decimal',{removeMaskOnSubmit:true,digits:3,digitsOptional:false,rightAlign:false,radixPoint:'.',autoGroup:true,groupSeparator:',',groupSize:3,suffix:'','placeholder':'0'});$(element).attr('maxlength',6);}else if(attrs.mask==='percentage-3-decimal-places'){$(element).inputmask('decimal',{removeMaskOnSubmit:true,digits:3,digitsOptional:false,rightAlign:false,radixPoint:'.',autoGroup:true,groupSeparator:',',groupSize:3,suffix:'%','placeholder':'0'});$(element).attr('maxlength',6);}else if(attrs.mask==='integer'){$(element).inputmask('decimal',{autoUnmask:true,digits:0,digitsOptional:false,rightAlign:false,radixPoint:'.',autoGroup:true,groupSeparator:',',groupSize:3});$(element).attr('maxlength',15);}else if(attrs.mask==='double'){$(element).inputmask('decimal',{removeMaskOnSubmit:true,digits:2,digitsOptional:false,rightAlign:false,radixPoint:'.',autoGroup:true,groupSeparator:',',groupSize:3});$(element).attr('maxlength',15);}else if(attrs.mask==='credit_score'){$(element).inputmask('decimal',{removeMaskOnSubmit:true,digits:0,digitsOptional:false,rightAlign:false,radixPoint:'.',autoGroup:true,groupSeparator:',',groupSize:3});$(element).attr('maxlength',3);}else{$(element).inputmask(attrs.mask);}}};}).directive('inputMask',function(){return{restrict:'A',link:function link(scope,el,attrs){$(el).inputmask(scope.$eval(attrs.inputMask));}};}).directive('datePicker',function(){return{restrict:'AE',scope:{isDisabled:'='},link:function link(scope,element){if(!scope.isDisabled){$(element).datepicker({autoclose:true});}}};}).directive('futureDatePicker',function(){return{restrict:'AE',scope:{isDisabled:'='},link:function link(scope,element){if(!scope.isDisabled){$(element).datepicker({autoclose:true,minDate:1,changeYear:true,changeMonth:true});}}};}).directive('formAutofillFix',function($timeout){return function(scope,elem,attrs){// Fixes Chrome bug: https://groups.google.com/forum/#!topic/angular/6NlucSskQjY
elem.prop('method','POST');// Fix autofill issues where Angular doesn't know about autofilled inputs
if(attrs.ngSubmit){$timeout(function(){elem.unbind('submit').submit(function(e){e.preventDefault();elem.find('input, textarea, select').trigger('input').trigger('change').trigger('keydown');scope.$apply(attrs.ngSubmit);});},0);}};}).directive('equals',function(){return{restrict:'A',// only activate on element attribute
require:'?ngModel',// get a hold of NgModelController
link:function link(scope,elem,attrs,ngModel){if(!ngModel){return;}// do nothing if no ng-model
// watch own value and re-validate on change
scope.$watch(attrs.ngModel,function(){validate();});// observe the other value and re-validate on change
attrs.$observe('equals',function(){validate();});var validate=function validate(){// values
var val1=ngModel.$viewValue;var val2=attrs.equals;// set validity
ngModel.$setValidity('equals',!val1||!val2||val1===val2);};}};}).directive('whitelist',function($timeout){return{restrict:'A',require:'^?ngModel',link:function compile(scope,element,attrs,ngModel){var regex=whiteListRegEx;if(attrs.whitelist&&attrs.whitelist==='numeric'){regex=whiteListRegExNumeric;}else if(attrs.whitelist&&attrs.whitelist==='urlname'){regex=whiteListRegExURLName;}else if(attrs.whitelist&&attrs.whitelist==='email'){regex=whiteListRegExEmail;}element.on('keydown',function(event){if(event.ctrlKey&&event.key.toLowerCase()==='a'||event.ctrlKey&&event.key.toLowerCase()==='c'||event.ctrlKey&&event.key.toLowerCase()==='v'){return true;}if(event.key&&skipKeys.includes(event.key)){return true;}return event.key?event.key.match(regex)===null:true;});element.on('blur',function(){if(ngModel){ngModel.$setViewValue($(this).val().replace(regex,''));ngModel.$render();}else{$(this).val($(this).val().replace(regex,''));}});$timeout(function(){if(ngModel){ngModel.$setViewValue($(element).val().replace(regex,''));ngModel.$render();}else{$(element).val($(element).val().replace(regex,''));}});}};}).filter('whitelist',function(){return function(input,type){if(input&&!type){return input.toString().replace(whiteListRegEx,'');}else if(input&&type==='date'){return input.toString().replace(/[^0-9\/]+/g,'');}else if(input&&type==='urlname'){return input.toString().replace(whiteListRegExURLName,'');}//todo: add currency, email, number
};}).filter('phone',function(){return function(phone){if(!phone){return'';}var value=phone.toString().trim().replace(/^\+/,'');if(value.match(/[^0-9]/)){return phone;}var country,city,number;switch(value.length){case 10:// +1PPP####### -> C (PPP) ###-####
country=1;city=value.slice(0,3);number=value.slice(3);break;case 11:// +CPPP####### -> CCC (PP) ###-####
country=value[0];city=value.slice(1,4);number=value.slice(4);break;case 12:// +CCCPP####### -> CCC (PP) ###-####
country=value.slice(0,3);city=value.slice(3,5);number=value.slice(5);break;default:return phone;}if(country==1){country='';}number=number.slice(0,3)+'-'+number.slice(3);return(country+' ('+city+') '+number).trim();};}).filter('urlencode',function(){return function(input){return window.encodeURIComponent(input);};});})();(function(){'use strict';angular.module('pclenderApp').filter('to_trusted',['$sce',function($sce){return function(text){return $sce.trustAsHtml(DOMPurify.sanitize(text));};}]).filter('trusted_src',['$sce',function($sce){return function(src){return $sce.trustAsResourceUrl(src);};}]).filter('decode_html',[function(){return function(text){var div=document.createElement('div');div.innerHTML=text;return div.textContent;};}]).filter('format_value',[function(){return function(text,dataType){if(dataType==='phone_number'){var phone=(''+text).replace(/\D/g,'');var _char={0:'(',3:') ',6:'-'};var value='';for(var i=0;i<10;i++){value+=(_char[i]||'')+(phone[i]?phone[i]:'_');}return value;}else if(dataType==='int'){if(text){return parseInt(text,10).toLocaleString();}else{return text;}}else{return text;}};}]);})();(function(){'use strict';angular.module('common.lib.image_upload.dropBoxUploader').component('dropBoxUploader',{templateUrl:'../../media/ng/lib/image_upload/dropbox_uploader/dropbox_uploader.html',bindings:{resolve:'<',modalInstance:'<'},controller:'DropBoxUploaderController',controllerAs:'vm'});})();(function(){'use strict';angular.module('common.lib.image_upload.dropBoxUploader').controller('DropBoxUploaderController',DropBoxUploaderController);DropBoxUploaderController.$inject=['HttpService','ModalService','$timeout'];function DropBoxUploaderController(HttpService,ModalService,$timeout){var vm=this;var filesStartedUploadCount=0,onClosing=false,myDropzone;var color={green:'#5cb85c',red:'#d9534f',orange:'#f0ad4e'};var noResponseMsg='Unable to receive response from the server, Please check the upload logs';vm.isOnProcess=false;vm.isOnStarted=false;vm.close=close;vm.$onInit=onInit;vm.startUpload=startUpload;vm.dzCallbacks={};vm.dzMethods={};/*
        * @name close
        * @desc Cancen the upload and close the upload window
        */function close(){var uploadingFiles=myDropzone.getUploadingFiles();if(uploadingFiles.length>0){ModalService.showConfirm('Cancel Upload','Are you sure you want to cancel the upload?').then(function(answer){if(answer){onClosing=true;uploadingFiles.forEach(function(file){myDropzone.removeFile(file);});myDropzone.getQueuedFiles().forEach(function(file){myDropzone.removeFile(file);});vm.modalInstance.close({filesStartedUploadCount:filesStartedUploadCount});}});}else{vm.modalInstance.close({filesStartedUploadCount:filesStartedUploadCount});}}/*
        * @name getTemplate
        * @desc Upload item template
        */function getTemplate(){/* eslint-disable */return'<div id="template">\
                        <div class="dz-preview dz-file-preview">\
                            <div class="dz-details">\
                                <span class="dz-filename">\
                                    <span data-dz-name></span>&nbsp;\
                                </span>\
                                (<span class="dz-size" data-dz-size></span>)\
                            </div>\
                            <div class="result-box">\
                                <span class="result-msg"></span>\
                                <img class="img-loading" src="'+STATIC_FILES+'media/b2b/img/bigrotation2.gif" />\
                            </div>\
                            <div class="dz-progress">\
                                <div class="progress">\
                                    <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" uploadprogress>\
                                        <span class="progress-text"></span>\
                                    </div>\
                                </div>\
                            </div>\
                        </div>\
                    </div>';/* eslint-enable */}/*
        * @name onInit
        * @desc Initialize uploader
        */function onInit(){vm.condition=vm.resolve.condition;vm.loanNumberId=vm.resolve.loanNumberId;vm.title=vm.resolve.title;vm.docNameMessage=vm.condition.Status_ID!==-1?'Upload files to a specific condition':'Upload All Documents as a single file';vm.dzOptions={url:'upload',maxFilesize:104857600,//100mb
parallelUploads:1,chunking:true,chunkSize:1000000,//1mb
forceChunking:true,parallelChunkUploads:false,retryChunks:true,retryChunksLimit:5,uploadMultiple:false,acceptedFiles:'image/jpeg, images/jpg, image/png, application/pdf, image/tiff',addRemoveLinks:true,previewTemplate:getTemplate(),previewsContainer:'#previews',autoQueue:true,clickable:'.fileinput-button',autoProcessQueue:false,init:function init(){myDropzone=this;myDropzone.on('addedfile',onAddedFile);myDropzone.on('sending',onSending);myDropzone.on('uploadprogress',onUploadProgress);myDropzone.on('complete',onComplete);myDropzone.on('success',onSuccess);myDropzone.on('queuecomplete',onQueueComplete);myDropzone.on('canceled',onCanceled);}};}/*
        * @name onAddedFile
        * @desc On files added
        */function onAddedFile(file){$timeout(function(){if(!file.accepted){ModalService.showAlert('Upload','Invalid File Format. Please only upload supported file type (jpg, png, pdf, tif)');myDropzone.removeFile(file);}else if(file.name.replace(/[^.]/g,'').length>1){ModalService.showAlert('File Upload Failed','The file/s you selected has an invalid file name. File names may not contain more than one period.');myDropzone.removeFile(file);}});vm.isOnStarted=false;}/*
        * @name startUpload
        * @desc On upload start
        */function startUpload(){myDropzone.processQueue();vm.isOnStarted=true;vm.isOnProcess=true;}/*
        * @name onCanceled
        * @desc On upload cancel
        * @param {Object} file
        */function onCanceled(file){if(!onClosing){myDropzone.processQueue();}HttpService.httpPost('cancelUpload',{id:file.upload.uuid,status_id:vm.condition.Status_ID,loan_id:vm.loanNumberId});}/*
        * @name onQueueComplete
        * @desc On Queue complete
        */function onQueueComplete(){vm.isOnProcess=false;}/*
        * @name onQueueComplete
        * @desc On Queue complete
        * @param {Object} file
        * @param {Object} xhr
        * @param {Object} formData
        */function onSending(file,xhr,formData){formData.append('loan_id',vm.loanNumberId);formData.append('status_id',vm.condition.Status_ID);}/*
        * @name onUploadProgress
        * @desc On Upload Progress
        * @param {Object} file
        * @param {Number} progress
        */function onUploadProgress(file,progress){if(file.previewElement){var progressElement=file.previewElement.querySelector('[uploadprogress]');if(progress<100){progressElement.style.width=progress+'%';progressElement.querySelector('.progress-text').textContent=progress.toFixed(2)+'%';}}}/*
        * @name onComplete
        * @desc on upload complete
        * @param {Object} file
        */function onComplete(file){if(file.previewElement){var progressElement=file.previewElement.querySelector('[uploadprogress]');progressElement.style.width='100%';progressElement.querySelector('.progress-text').textContent='100%';}}/*
        * @name onSuccess
        * @desc on upload success
        * @param {Object} file
        */function onSuccess(file){var json=JSON.parse(file.xhr.responseText);if(json.success){filesStartedUploadCount++;HttpService.httpPost('uploadImageToLOS',{id:json.data,status_id:vm.condition.Status_ID,loan_id:vm.loanNumberId}).then(function(response){if(response.success){if(response.data&&response.data.run_in_background){updateMsg(file.previewElement,noResponseMsg,false,color.orange);}else{updateMsg(file.previewElement,'Successfully Uploaded',false,color.green);}}})["catch"](function(response){if(response.data){updateMsg(file.previewElement,response.data,false,color.red);}else{updateMsg(file.previewElement,noResponseMsg,false,color.orange);}});}else{$timeout(function(){ModalService.showAlert('File Upload Failed',json.data);myDropzone.removeFile(file);});vm.isOnStarted=false;}if(file.previewElement){var removeLink=file.previewElement.querySelector('.dz-remove');removeLink.style.display='none';var progressBar=file.previewElement.querySelector('.dz-progress');progressBar.style.display='none';updateMsg(file.previewElement,'Uploading to LOS...',true,color.orange);}myDropzone.processQueue();}function updateMsg(previewElement,msg,showLoading,color){previewElement.querySelector('.result-box').style.display='block';previewElement.querySelector('.result-msg').innerText=msg;previewElement.querySelector('.img-loading').style.display=showLoading?'inline':'none';previewElement.querySelector('.result-msg').style.color=color;}}})();(function(){'use strict';angular.module('pclenderApp').service('ImageUploadService',ImageUploadService);ImageUploadService.$inject=['$uibModal','$q','HttpService'];function ImageUploadService($uibModal,$q,HttpService){ImageUpload.prototype.showImageUpload=showImageUpload;ImageUpload.prototype.showUploadLogs=showUploadLogs;ImageUpload.prototype.uploadImagingFile=uploadImagingFile;ImageUpload.prototype.showImageUpload2=showImageUpload2;return new ImageUpload();function ImageUpload(){}function showImageUpload(_loanNumberId,_condition){return $q(function(resolve){var modalInstance=$uibModal.open({component:'imageUploader',size:'md',keyboard:false,backdrop:'static',resolve:{loanNumberId:function loanNumberId(){return _loanNumberId;},condition:function condition(){return _condition;}}});modalInstance.result.then(function(result){resolve(result);});});}function showUploadLogs(_loanNumberId2,_condition2){return $q(function(resolve){var modalInstance=$uibModal.open({component:'uploadLogs',size:'md',keyboard:false,backdrop:'static',resolve:{loanNumberId:function loanNumberId(){return _loanNumberId2;},condition:function condition(){return _condition2;}}});modalInstance.result.then(function(result){resolve(result);});});}function uploadImagingFile(files,statusId,loanId,afterUploadToLOS,index){return $q(function(resolve,reject){if(files.length>0){uploadSingleFile(files[0],statusId,loanId,afterUploadToLOS).then(function(){index++;if(index<files.length){uploadImagingFile(files,statusId,loanId,afterUploadToLOS,index).then(function(response){resolve(response);});}else{resolve();}});}else{reject();}});}function uploadSingleFile(file,statusId,loanId,afterUploadToLOS){return $q(function(resolve,reject){var formData=new FormData();formData.append('file',file);formData.append('loan_id',loanId);formData.append('status_id',statusId);formData.append('dzuuid',Math.random().toString(36));formData.append('dztotalfilesize',file.size);formData.append('dzchunkindex',0);formData.append('dzchunksize',file.size);formData.append('dztotalchunkcount',1);var xhr=new XMLHttpRequest();xhr.open('post','upload');xhr.onload=function(){var json=JSON.parse(xhr.responseText);if(json.success){HttpService.httpPost('uploadImageToLOS',{id:json.data,status_id:statusId,loan_id:loanId}).then(function(response){if(afterUploadToLOS){afterUploadToLOS();}resolve(response);})["catch"](function(err){if(afterUploadToLOS){afterUploadToLOS();}resolve(err);});}else{reject();}};xhr.send(formData);});}function showImageUpload2(_loanNumberId3,_condition3){var _title=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';return $q(function(resolve){var modalInstance=$uibModal.open({component:'dropBoxUploader',size:'md',keyboard:false,backdrop:'static',resolve:{loanNumberId:function loanNumberId(){return _loanNumberId3;},condition:function condition(){return _condition3;},title:function title(){return _title;}}});modalInstance.result.then(function(result){resolve(result);});});}}})();(function(){'use strict';angular.module('common.lib.image_upload.imageUploader').component('imageUploader',{templateUrl:'../../media/ng/lib/image_upload/image_uploader/image_uploader.html',bindings:{resolve:'<',modalInstance:'<'},controller:'ImageUploaderController',controllerAs:'vm'});})();(function(){'use strict';angular.module('common.lib.image_upload.imageUploader').controller('ImageUploaderController',ImageUploaderController);ImageUploaderController.$inject=['HttpService'];function ImageUploaderController(HttpService){var vm=this;vm.$onInit=onInit;vm.cancel=cancel;vm.closeModal=close;vm.openLogs=openLogs;vm.removeFile=removeFile;vm.files=[];vm.uploadDisabled=true;vm.pickDisabled=false;vm.closeDisabled=false;vm.progressDisplay='display : none';vm.missingFSHSupportMessage='Your browser doesn\'t have Flash, Silverlight or HTML5 support.';vm.docNameMessage='';vm.convertFileSize=convertFileSize;vm.staticFiles=STATIC_FILES;vm.showOpenLogs=false;var uploadIds=[];var validFileExt='pdf,tif,png,jpg';vm.fileUpload={url:'../upload',options:{multi_selection:true,browse_button:'pickfiles',container:'container',runtimes:'html5,flash,silverlight,html4',url:'../upload',flash_swf_url:'../js/Moxie.swf',silverlight_xap_url:'../js/Moxie.xap',filters:{max_file_size:'100mb',mime_types:[{title:'Image files',extensions:validFileExt}]},multipart_params:{upload_id:0,total_size:0},chunk_size:'2000kb',max_retries:3},callbacks:{postInit:function postInit(uploader){vm.missingFSHSupportMessage='';vm.docNameMessage=vm.condition.Status_ID!==-1?'Upload files to a specific condition':'Upload All Documents as a single file';vm.consoleMessage='';vm.uploadStart=function(){vm.filesUploaded=true;createUploadId(uploader);return false;};vm.stopUpload=function(){uploader.stop();};},beforeUpload:function beforeUpload(uploader,file){angular.forEach(uploadIds,function(upload){if(upload.uid===file.id){uploader.settings.multipart_params.upload_id=upload.upload_id;uploader.settings.multipart_params.total_size=file.size;}});},beforeChunkUpload:function beforeChunkUpload(uploader,file,post,current,offset){console.dir(offset);},filesAdded:function filesAdded(uploader){if(checkFileName(uploader.files)){vm.loading=true;vm.files=uploader.files;vm.uploadDisabled=false;}else{vm.consoleStyle='color: red';vm.consoleMessage='The file name include invalid charachters " * : < > ? / \\ |.';return false;}},uploadProgress:function uploadProgress(uploader){vm.consoleMessage='';vm.total=uploader.total;vm.progressStyleWidth='width :'+uploader.total.percent+'%';vm.uploadDisabled=true;vm.pickDisabled=true;vm.progressDisplay='display : block';},fileUploaded:function fileUploaded(uploader,file,result){vm.progressDisplay='display : none';vm.uploadDisabled=false;vm.pickDisabled=false;if(result.status){var r=JSON.parse(result.status);if(r==200){vm.consoleStyle='color: green';vm.consoleMessage='Please wait while we save your document to LOS.<br />You can close this window while we upload the file. <img style=\"width: 15px\" src=\"'+vm.staticFiles+'media/b2b/img/bigrotation2.gif\" >';var response=JSON.parse(result.response);if(response.success){uploadToLOS(response.last_id);}}else{vm.consoleStyle='color: red';vm.consoleMessage='Unable to Upload: '+result.response.error;console.log(result.status);}}else{vm.consoleStyle='color: orange';vm.consoleMessage='The file is still being uploaded to LOS. A Large file will take a longer time to upload.';}},error:function error(uploader,_error){vm.consoleStyle='color: red';vm.consoleMessage='Upload error: '+_error.message;}}};function onInit(){vm.condition=vm.resolve.condition;vm.loanNumberId=vm.resolve.loanNumberId;}/*
         * @desc Create Upload ID
         */function createUploadId(uploader){var files=[];uploadIds=[];angular.forEach(uploader.files,function(file){files.push({id:file.id,filename:file.name});});HttpService.httpPost('createUploadId',{filenames:files,status_id:vm.condition.Status_ID,loan_id:vm.loanNumberId}).then(function(response){if(response.success){uploadIds=response.data;uploader.start();}});}/*
         * @desc Upload Image To LOS
         */function uploadToLOS(id){HttpService.httpPost('uploadImageToLOS',{id:id,status_id:vm.condition.Status_ID,loan_id:vm.loanNumberId}).then(function(response){if(response.success){if(response.data&&response.data.run_in_background){vm.consoleStyle='';vm.consoleMessage='';vm.showOpenLogs=true;}else{vm.consoleStyle='color: green';vm.consoleMessage='Upload Complete';}}})["catch"](function(response){if(response.data){vm.consoleStyle='color: red';vm.consoleMessage=response.data;vm.showOpenLogs=false;}else{vm.consoleStyle='';vm.consoleMessage='';vm.showOpenLogs=true;}});}/*
         * @desc Check Filename
         */function checkFileName(files){for(var i=0;i<files.length;i++){if(includeSpecialChar(files[i].name)){return false;}}return true;}/*
         * @desc Include Special Character
         */function includeSpecialChar(str){//str = str.replace(/\\/g, '\\\\');
var existbackslash=false;if(str.match(/\\/g)){existbackslash=true;}var existspecialchar=false;existspecialchar=/["*:<>?/\|]/g.test(str);//console.log('str ' + str);
//console.log('existspecialchar ' + existspecialchar);
return existbackslash||existspecialchar;}/*
         * @desc Cancel button
         */function cancel(filesHaveBeenUploaded){if(filesHaveBeenUploaded){close(filesHaveBeenUploaded);}else{vm.modalInstance.dismiss('cancel');}}/*
         * @desc Close
         */function close(filesHaveBeenUploaded){if(filesHaveBeenUploaded){vm.modalInstance.close({action:'save',data:{files:vm.files,success:true}});}else{vm.modalInstance.dismiss('cancel');}}/*
         * @desc Convert File Size
         */function convertFileSize(size){if(size<1000000){return Math.floor(size/1000)+'KB';}return Math.floor(size/1000000)+'MB';}/*
         * @desc Open Logs
         */function openLogs(){vm.modalInstance.close({action:'openLogs',condition:vm.condition});}/*
         * @desc Remove File
         */function removeFile(item){var index=vm.files.indexOf(item);vm.files.splice(index,1);}}})();(function(){'use strict';angular.module('common.lib.image_upload.uploadLogs').component('uploadLogs',{templateUrl:'../../media/ng/lib/image_upload/upload_logs/upload_logs.html',bindings:{resolve:'<',modalInstance:'<'},controller:'UploadLogsController',controllerAs:'vm'});})();(function(){'use strict';angular.module('common.lib.image_upload.uploadLogs').controller('UploadLogsController',UploadLogsController);UploadLogsController.$inject=['HttpService','$interval'];function UploadLogsController(HttpService,$interval){var vm=this,interval=null,reload=false;vm.$onInit=$onInit;vm.close=close;vm.collapse=collapse;vm.clearLogs=clearLogs;vm.items=[];vm.status={PENDING:'0',SUCCESS:'1',FAILED:'2'};vm.loading=false;vm.collapseIds={};vm.STATIC_FILES=STATIC_FILES;var incompleteCount=0;/*
         * @desc Init Controller
         */function $onInit(){vm.loanNumberId=vm.resolve.loanNumberId;interval=$interval(function(){getUploadImageStatus(false);},30000);getUploadImageStatus(true);}/*
         * @desc Collapse log
         */function collapse(item){vm.collapseIds[item.id]=!vm.collapseIds[item.id];}/*
         * @desc Close the modal
         */function close(){$interval.cancel(interval);vm.modalInstance.close({reload:reload});}/*
         * @desc Get the pending upload records
         */function getUploadImageStatus(initialLoad){vm.loading=true;var timezone_abbr=new Date().toString().match(/([A-Z]+[\+-][0-9]+)/)[1];HttpService.httpGet('getUploadImageStatus',{status_id:vm.resolve.condition.Status_ID,loan_id:vm.loanNumberId,tz_abbr:timezone_abbr}).then(function(response){if(response.success){vm.items=response.data.images;if(response.data.reload){reload=true;}else{var tmpIncompleteCount=0;angular.forEach(vm.items,function(item){if(item.process_complete==='0'){tmpIncompleteCount++;}});if(!initialLoad&&tmpIncompleteCount!==incompleteCount){reload=true;}if(initialLoad){incompleteCount=tmpIncompleteCount;}}}})["catch"](function(response){console.dir(response);})["finally"](function(){vm.loading=false;});}/*
         * @desc Delete the logs
         */function clearLogs(){HttpService.httpGet('clearUploadImageLogs',{status_id:vm.resolve.condition.Status_ID,loan_id:vm.loanNumberId}).then(function(response){if(response.success){vm.items=[];reload=true;}})["catch"](function(response){console.dir(response);})["finally"](function(){vm.loading=false;});}}})();(function(){'use strict';angular.module('common.lib.image_viewer.imageViewer').component('imageViewer',{templateUrl:'../../media/ng/lib/image_viewer/image_viewer.html',bindings:{resolve:'<',modalInstance:'<'},controller:'ImageViewerController',controllerAs:'vm'});})();(function(){'use strict';angular.module('common.lib.image_viewer.imageViewer').controller('ImageViewerController',ImageViewerController);ImageViewerController.$inject=['$scope','HttpService','ModalService'];function ImageViewerController($scope,HttpService,ModalService){var vm=this;var statusIds=[];vm.imageWidth=100;vm.imageDataTemp=[];vm.printPageCount=0;vm.$onInit=onInit;vm.close=close;vm.showPage=showPage;vm.changeImageWidth=changeImageWidth;vm.isZoomInDisabled=isZoomInDisabled;vm.isZoomOutDisabled=isZoomOutDisabled;vm.zoomIn=zoomIn;vm.zoomOut=zoomOut;vm.downloadCurrentPage=downloadCurrentPage;vm.printCurrentPage=printCurrentPage;vm.downloadAllPage=downloadAllPage;vm.printAll=printAll;vm.onImageOnLoad=onImageOnLoad;/*
         * @desc Init Controller
         */function onInit(){vm.loanNumberId=vm.resolve.loanNumberId;vm.imageData=vm.resolve.imageData;vm.multiTaskImg=vm.resolve.multiTaskImg;vm.callBack=vm.resolve.callBack;ModalService.showLoading('Loading images... Please wait...');vm.imageDataTemp=[];var pageCount=0;for(var i=0;i<vm.imageData.length;i++){if(statusIds.indexOf(vm.imageData[i].StatusID)===-1){statusIds.push(vm.imageData[i].StatusID);}pageCount=pageCount+parseInt(vm.imageData[i].PageCount,10);for(var x=1;x<=parseInt(vm.imageData[i].PageCount,10);x++){vm.imageDataTemp.push({'statusid':vm.imageData[i].StatusID,'imageid':vm.imageData[i].ImageID,'pageindex':x});}}vm.numberOfPage=pageCount;loadImageURLs().then(function(data){ModalService.hideLoading();vm.imageURLs=data;loadInitialThumbnails();changeImageWidth();});angular.element(document.querySelector('#imaging-thubmnail-section')).bind('scroll',loadThumbnailLazy);$scope.$watch('vm.printPageCount',function(){if(vm.printPageCount>0&&vm.printPageCount===vm.imageURLs.length){printDiv('all-page');}});}/*
         * @name loadImageURLs
         * @desc load the image guid
         * @return {Promise}
         */function loadImageURLs(){return HttpService.httpPost('getPageImageURLs',{loan_number_id:vm.loanNumberId,image_data:vm.imageData,filter:false}).then(function(response){if(response.success){return response.data.image_urls;}});}/*
         * @name loadThumbnailLazy
         * @desc load the thumbnails
         * @return {Promise}
         */function loadThumbnailLazy(){var dis=document.querySelector('#imaging-thubmnail-section');var lazyloadImages=document.querySelectorAll('img.lazy');var scrollTop=dis.scrollTop;for(var i=0;i<lazyloadImages.length;i++){var img=lazyloadImages[i];if(img.offsetTop<dis.clientHeight+scrollTop&&img.offsetTop>dis.clientHeight+scrollTop-1000){if(!img.src){img.src='getPageImage?image_guid='+vm.imageURLs[i].ImageURL;}}}}/*
         * @name loadInitialThumbnails
         * @desc load the first thumbnails and load the first page in the main section
         */function loadInitialThumbnails(){var lazyloadImages=document.querySelectorAll('img.lazy');for(var i=0;i<4;i++){if(i<lazyloadImages.length){var img=lazyloadImages[i];if(!img.src){img.src='getPageImage?image_guid='+vm.imageURLs[i].ImageURL;}}}vm.showPage(0);}/*
         * @name showPage
         * @desc Show the page in the main section
         * @param {Number} pageIndex
         */function showPage(pageIndex){vm.selectedPageImage='getPageImage?image_guid='+vm.imageURLs[pageIndex].ImageURL;vm.currentPageIndex=pageIndex;}/*
         * @name close
         * @desc Close the window
         */function close(){vm.modalInstance.close();if(vm.callBack){vm.callBack();}}/*
         * @name changeImageWidth
         * @desc Change the width of the image
         */function changeImageWidth(){vm.imageStyle={width:vm.imageWidth+'%'};}/*
         * @name isZoomInDisabled
         * @desc check if the zoom in will disable
         * @return {Boolean}
         */function isZoomInDisabled(){return vm.imageWidth>=200;}/*
         * @name isZoomOutDisabled
         * @desc check if the zoom out will disable
         * @return {Boolean}
         */function isZoomOutDisabled(){return vm.imageWidth<=100;}/*
         * @name zoomIn
         * @desc Zoom in the image
         */function zoomIn(){vm.imageWidth+=10;changeImageWidth();};/*
         * @name zoomOut
         * @desc Zoom out the image
         */function zoomOut(){vm.imageWidth-=10;changeImageWidth();};/*
         * @name downloadCurrentPage
         * @desc Download the current selected page
         */function downloadCurrentPage(){window.location.href='download_imaging?loanid='+vm.loanNumberId+'&statusid='+vm.imageURLs[vm.currentPageIndex].StatusID+'&imageid='+vm.imageURLs[vm.currentPageIndex].ImageID+'&pagecount='+vm.imageURLs[vm.currentPageIndex].PageNumber;}/*
         * @name printCurrentPage
         * @desc Print the current page
         */function printCurrentPage(){printDiv('current-page');}/*
         * @name printDiv
         * @desc Show the print window
         * @param {String} dviName
         */function printDiv(divName){var div2Print=document.getElementById(divName);var printWindow=window.open('','print-window');printWindow.document.open();printWindow.document.write('<html><body onload="window.print();">'+div2Print.innerHTML+'</body></html>');printWindow.document.close();}/*
         * @name downloadAllPage
         * @desc Download all the page
         */function downloadAllPage(){if(vm.multiTaskImg){window.open('download_imaging?loanid='+vm.loanNumberId+'&statusid=0&imageid=0&pagecount=0&downloadall=1&arrData='+statusIds.join(','),'_blank');}else{window.location.href='download_imaging?loanid='+vm.loanNumberId+'&statusid='+vm.imageURLs[vm.currentPageIndex].StatusID+'&imageid='+vm.imageURLs[vm.currentPageIndex].ImageID+'&pagecount='+vm.numberOfPage+'&downloadall=1';}}/*
         * @name printAll
         * @desc Render the images before showing the print
         */function printAll(){vm.allPages=vm.imageURLs;}/*
         * @name onImageOnLoad
         * @desc Count the image loaded
         */function onImageOnLoad(){vm.printPageCount++;}}})();(function(){'use strict';angular.module('pclenderApp').service('ImageViewerService',ImageViewerService);ImageViewerService.$inject=['$uibModal','$q'];function ImageViewerService($uibModal,$q){ImageViewerService.prototype.showImageViewer=showImageViewer;return new ImageViewerService();function ImageViewerService(){}/*
         * @name showImageViewer
         * @desc Show the Image Viewer
         * @param {Number} loanNumberId
         * @param {Array} imageData
         * @param {Boolean} multiTaskImg
         * @param {Function} callBack
         * @result {Promise}
         */function showImageViewer(_loanNumberId4,_imageData,_multiTaskImg,_callBack){return $q(function(resolve){var modalInstance=$uibModal.open({component:'imageViewer',size:'lg',keyboard:false,backdrop:'static',resolve:{loanNumberId:function loanNumberId(){return _loanNumberId4;},imageData:function imageData(){return _imageData;},multiTaskImg:function multiTaskImg(){return _multiTaskImg;},callBack:function callBack(){return _callBack;}}});modalInstance.result.then(function(result){resolve(result);});});}}})();(function(){'use strict';angular.module('pclenderApp').controller('LoadingController',LoadingController).directive('loadingModal',function(){return{restrict:'E',scope:{loanid:'=',submittype:'='},controller:'LoadingController',controllerAs:'vm',templateUrl:'../../media/ng/lib/loading/loading.html'};});LoadingController.$inject=['$scope','$timeout','CommonService'];function LoadingController($scope,$timeout,CommonService){var vm=this;vm.static_files=STATIC_FILES;$scope.showLoading=showLoading;$scope.hideLoading=hideLoading;CommonService.showLoading=showLoading;CommonService.hideLoading=hideLoading;CommonService.updateLoadingMsg=updateLoadingMsg;function showLoading(msg){if(msg===''){vm.loading_msg='Loading Screen. Please wait.....';}else{vm.loading_msg=msg;}if($('.fade.in').length>0){updateLoadingMsg(msg);}else{$timeout(function(){$scope.$apply();$('#myLoadingModal').modal('show');$('.modal-backdrop').css('position','fixed');});}}function updateLoadingMsg(msg){vm.loading_msg=msg;$timeout(function(){$scope.$apply();});}function hideLoading(){$('.modal-backdrop').css('position','relative');$('#myLoadingModal').modal('hide');}}})();(function(){'use strict';angular.module('common.lib.lookup.company').component('companyLookup',{bindings:{resolve:'<',modalInstance:'<'},controller:'CompanyLookupController',controllerAs:'vm',templateUrl:'../../media/ng/lib/lookup/company/company.html'});})();(function(){'use strict';angular.module('common.lib.lookup.company').controller('CompanyLookupController',CompanyLookupController);CompanyLookupController.$inject=['HttpService'];function CompanyLookupController(HttpService){var vm=this;vm.tab={ADD_EXISTING:0,NEW_COMPANY:1,ADD_EXISTING_CONTACT:2,NEW_CONTACT:3};vm.staticFiles=STATIC_FILES;vm.activeTab=vm.tab.ADD_EXISTING;vm.$onInit=onInit;vm.changeTab=changeTab;vm.searchCompany=searchCompany;vm.getSearchNumberOfPage=getSearchNumberOfPage;vm.changeCompanySearchPage=changeCompanySearchPage;vm.getSearchInfo=getSearchInfo;vm.selectCompany=selectCompany;vm.cancel=cancel;vm.save=save;vm.createAndSave=createAndSave;vm.isAddCompanyEnabled=isAddCompanyEnabled;vm.searchContacts=searchContacts;vm.selectContact=selectContact;vm.selectExistingContact=selectExistingContact;vm.isAddNewContactEnabled=isAddNewContactEnabled;vm.addAndSelectNewContact=addAndSelectNewContact;vm.changeContactSearchPage=changeContactSearchPage;vm.companySearch={numberPerPage:10,numberOfPage:0,currentPage:1,recordList:[],numberOfRecords:-1};vm.contactSearch={numberPerPage:10,numberOfPage:0,currentPage:1,recordList:[],numberOfRecords:-1};vm.newContact={Last_Name:'',First_Name:'',EMail_Address:'',Cell:'',Middle_Name:''};vm.search={companyName:''};vm.company={};/*
         * Initialize Component
         */function onInit(){}/*
         * @name changeTab
         * @desc Change the selected Tab
         * @param {Object} tab
         */function changeTab(tab){vm.activeTab=tab;}/*
         * @name searchCompany
         * @desc Run company search using company name
         */function searchCompany(){loadCompanies('',vm.search.companyName,[]);}/*
         * @name loadCompanies
         * @desc Run a company search
         * @param {String} companyType
         * @param {String} companyName
         * @param {String} companyIds
         */function loadCompanies(companyType,companyName,companyIds){vm.loading=true;vm.selectedCompanyID=0;HttpService.httpPost('searchCompanies',{contact_type:companyType,company_name:companyName,company_ids:companyIds}).then(function(response){if(response.success){vm.companies=response.data.companies;if(response.data.company_ids.length>0){vm.companySearch.recordList=response.data.company_ids;vm.companySearch.numberOfRecords=response.data.company_ids.length;refreshCompanyPagination();}}else{vm.companies=[];}})["catch"](function(){vm.companies=[];vm.companySearch.recordList=[];refreshCompanyPagination();})["finally"](function(){vm.loading=false;});}/*
         * @name refreshCompanyPagination
         * @desc Refresh Company Pagination
         */function refreshCompanyPagination(){vm.companySearch.numberOfPage=Math.ceil(vm.companySearch.recordList.length/vm.companySearch.numberPerPage);vm.companySearch.currentPage=1;}/*
         * @name getSearchNumberOfPage
         * @desc Get the number of page
         * @param {String} contactType
         * @return {Array}
         */function getSearchNumberOfPage(contactType){return new Array(contactType.numberOfPage);}/*
         * @name changeCompanySearchPage
         * @desc Change Company Search Page
         * @param {Number} pageNumber
         * @return {Boolean}
         */function changeCompanySearchPage(pageNumber){if(pageNumber<1||pageNumber>vm.companySearch.numberOfPage){return false;}vm.companySearch.currentPage=pageNumber;if(vm.companySearch.recordList){var start=(pageNumber-1)*vm.companySearch.numberPerPage,end=start+vm.companySearch.numberPerPage,companyIds=vm.companySearch.recordList.slice(start,end);loadCompanies('','',companyIds);}}function getSearchInfo(search){var str='';if(search.numberOfPage>0){var n1=(search.currentPage-1)*search.numberPerPage+1,n2=search.currentPage*search.numberPerPage,n3=search.recordList.length;if(n2>n3){n2=n3;}if(n3>0){str='Showing '+n1+' to '+n2+' of '+n3+' entries';}}else if(search.numberOfRecords===-1){str='Click Search to Load the Records';}else{str='No Records Found';}return str;}function selectCompany(company){vm.selectedCompany=company;}function cancel(){vm.modalInstance.dismiss('cancel');}function save(){if(vm.selectedCompany){vm.modalInstance.close({action:'select-company',data:{company:vm.selectedCompany}});}}function createAndSave(){vm.modalInstance.close({action:'create-select-company',data:{company:vm.company}});}function isAddCompanyEnabled(){return vm.company.Company_Name&&vm.company.Address&&vm.company.State&&vm.company.Zip&&vm.company.City;}function searchContacts(){loadContacts('All',vm.search.contactName,[],'All','All');}function loadContacts(contactType,lastName,contactIds,state,status){vm.loading=true;vm.selectedContactID=0;HttpService.httpPost('searchContacts',{last_name:lastName,type:contactType,state:state,status:status,contact_ids:contactIds}).then(function(response){if(response.success){vm.contacts=response.data.contacts;if(response.data.contact_ids.length>0){vm.contactSearch.recordList=response.data.contact_ids;vm.contactSearch.numberOfRecords=response.data.contact_ids.length;refreshContactPagination();}}})["catch"](function(){vm.contacts=[];})["finally"](function(){vm.loading=false;});}function refreshContactPagination(){vm.contactSearch.numberOfPage=Math.ceil(vm.contactSearch.recordList.length/vm.contactSearch.numberPerPage);vm.contactSearch.currentPage=1;}function selectContact(contact){vm.selectedContact=contact;}function selectExistingContact(){if(vm.selectedContact){vm.modalInstance.close({action:'select-contact',data:{contact:vm.selectedContact}});}}function isAddNewContactEnabled(){//return vm.newContact.Person.Last_Name &&
//vm.newContact.Person.First_Name;
return vm.newContact.Last_Name&&vm.newContact.First_Name;}function addAndSelectNewContact(){vm.modalInstance.close({action:'create-select-contact',data:{contact:vm.newContact}});}/*
         * @name changeContactSearchPage
         * @desc Change Contact Search Page
         * @param {Number} pageNumber
         * @return {Boolean}
         */function changeContactSearchPage(pageNumber){if(pageNumber<1||pageNumber>vm.contactSearch.numberOfPage){return false;}vm.contactSearch.currentPage=pageNumber;if(vm.contactSearch.recordList){var start=(pageNumber-1)*vm.contactSearch.numberPerPage,end=start+vm.contactSearch.numberPerPage,contactIds=vm.contactSearch.recordList.slice(start,end);loadContacts('','',contactIds,'','');}}}})();(function(){'use strict';angular.module('pclenderApp').service('LookupService',LookupService);LookupService.$inject=['$uibModal','$q'];function LookupService($uibModal,$q){Lookup.prototype.showLookup=showLookup;Lookup.prototype.showProgramLookup=showProgramLookup;return new Lookup();function Lookup(){}function showLookup(_title2,_loanNumberId5,_showExistingCompanyTab,_showAddCompanyTab,_showExistingContactTab,_showAddContactTab){return $q(function(resolve){var modalInstance=$uibModal.open({component:'companyLookup',size:'lg',keyboard:false,backdrop:'static',resolve:{loanNumberId:function loanNumberId(){return _loanNumberId5;},showExistingCompanyTab:function showExistingCompanyTab(){return _showExistingCompanyTab;},showAddCompanyTab:function showAddCompanyTab(){return _showAddCompanyTab;},showExistingContactTab:function showExistingContactTab(){return _showExistingContactTab;},showAddContactTab:function showAddContactTab(){return _showAddContactTab;},title:function title(){return _title2;}}});modalInstance.result.then(function(result){resolve(result);});});}function showProgramLookup(settings){if(settings&&!settings.hasOwnProperty('program_filter_enable')){settings={program_filter_enable:false};}return $q(function(resolve){var modalInstance=$uibModal.open({component:'programLookup',size:'lg',keyboard:false,backdrop:'static',resolve:{settings:settings}});modalInstance.result.then(function(result){resolve(result);});});}}})();(function(){'use strict';angular.module('common.lib.lookup.programs').component('programLookup',{bindings:{resolve:'<',modalInstance:'<'},controller:'ProgramController',controllerAs:'vm',templateUrl:'../../media/ng/lib/lookup/programs/programs.html'});})();(function(){'use strict';angular.module('common.lib.lookup.programs').controller('ProgramController',ProgramController);ProgramController.$inject=['HttpService'];function ProgramController(HttpService){var vm=this;var programs=[];vm.filterProgram=filterProgram;vm.selectProgram=selectProgram;vm.cancel=cancel;vm.select=select;vm.clearFilter=clearFilter;vm.yesNo=['','Yes','No'];vm.financeMethodList=['','Fixed','NoNeg ARM','Neg ARM','Interest Only','Buydown'];vm.termFrom='';vm.termTo='';vm.category='';vm.prepayPenalty='';vm.financeMethod='';vm.investor={id:'',company:''};vm.selectedProgram={};function loadProgramLookupSettings(){HttpService.httpPost('getProgramLookupSettings',{}).then(function(response){if(response.success){vm.programCategory=response.data.program_category;vm.programCategory.splice(0,0,{los_program_category:'',friendly_name:'All'});vm.investorList=response.data.investor_list;vm.investorList.splice(0,0,{id:'',company:''});programs=response.data.program_list;if(vm.resolve&&vm.resolve.settings&&vm.resolve.settings.program_filter_enable&&vm.resolve.settings.program_filter_fields){var enabledFields=vm.resolve.settings.program_filter_fields;vm.showProgramCategory=enabledFields.program_category||false;vm.showFinanceMethod=enabledFields.finance_method||false;vm.showInvestor=enabledFields.investor||false;vm.showPrepayPenalty=enabledFields.prepay_penalty||false;vm.showTerms=enabledFields.loan_term||false;}filterProgram();}});}function filterProgram(){vm.programs=programs.filter(function(program){var returnVal=true;if(vm.showProgramCategory&&vm.category){returnVal=program.Program_Category===vm.category||program.Program_Category===''||!program.Program_Category;}if(vm.showFinanceMethod&&vm.financeMethod&&returnVal){returnVal=program.Finance_method===vm.financeMethod||program.Finance_method===''||!program.Finance_method;}if(vm.showInvestor&&vm.investor&&vm.investor.id&&returnVal){returnVal=program.Investor_ID===vm.investor.id||program.Investor_ID===''||!program.Investor_ID;}if(vm.showPrepayPenalty&&vm.prepayPenalty&&returnVal){returnVal=program.Prepay_Penalty===vm.prepayPenalty[0];}if(vm.showTerms){if(vm.termFrom!==''&&vm.termTo!==''&&returnVal){if(program.Loan_Term!==''){var from=Number(vm.termFrom);var to=Number(vm.termTo);var loanTerm=Number(program.Loan_Term);returnVal=loanTerm>=from&&loanTerm<=to;}else{returnVal=false;}}else if(vm.termFrom===''&&vm.termTo!==''&&returnVal){if(program.Loan_Term!==''){var _to=Number(vm.termTo);var _loanTerm=Number(program.Loan_Term);returnVal=_loanTerm<=_to;}else{returnVal=false;}}else if(vm.termFrom!==''&&vm.termTo===''&&returnVal){if(program.Loan_Term!==''){var _from=Number(vm.termFrom);var _loanTerm2=Number(program.Loan_Term);returnVal=_loanTerm2>=_from;}else{returnVal=false;}}}return returnVal;});vm.selectedProgram=undefined;}function selectProgram(program){vm.selectedProgram=program;}function cancel(){vm.modalInstance.dismiss('cancel');}function select(){vm.modalInstance.close({data:{program:vm.selectedProgram}});}function clearFilter(){vm.termFrom='';vm.termTo='';vm.category='';vm.prepayPenalty='';vm.financeMethod='';vm.investor={id:'',company:''};vm.programs=programs;}loadProgramLookupSettings();}})();(function(){'use strict';angular.module('pclenderApp').controller('MessengerController',MessengerController).directive('messenger',function(){return{restrict:'E',scope:{},controller:'MessengerController',controllerAs:'vm',templateUrl:'../../media/ng/lib/messenger/messenger.html'};});MessengerController.$inject=['$scope','$timeout','CommonService','HttpService'];function MessengerController($scope,$timeout,CommonService,HttpService){$scope.contacts=[];$scope.message={};$scope.showReplyButton=false;$scope.isReadOnly=false;$scope.showSendReplyButton=false;$scope.currentMessage={};$scope.currentContact={};$scope.sendMessageBody='';$scope.showNavigation=false;$scope.openMessenger=function(contact){$scope.$apply(function(){$scope.currentContact=contact;});$scope.sendMessageBody='';$('#new_msgr_modal').modal('show');};$scope.sendMessage=function(){$('#new_msgr_modal').modal('hide');CommonService.showConfirm('Confirm','Are you sure you want to send the message?',function(){CommonService.hideConfirm();CommonService.showLoading('Sending Message....');if(typeof LOAN_NUMBER_ID==='undefined'){LOAN_NUMBER_ID=0;}var params={memo_id:0,msg:$scope.sendMessageBody,email:$scope.currentContact.email,msg_type:$scope.currentContact.msg_type,loan_number_id:LOAN_NUMBER_ID};HttpService.httpPost('send_messaging',params).then(function(response){if(response.success){CommonService.showAlert('Messages','Message Sent');}})["finally"](function(){CommonService.hideLoading();$scope.sendMessageBody='';});},function(){CommonService.hideConfirm();$('#new_msgr_modal').modal('show');});};}})();(function(){'use strict';angular.module('pclender.lib.modal.alert').component('alert',{templateUrl:'../../media/ng/lib/modal/alert/alert.html',bindings:{resolve:'<',message:'=',modalInstance:'<'},controller:'ModalAlertController',controllerAs:'vm'});})();(function(){'use strict';angular.module('pclender.lib.modal.alert').controller('ModalAlertController',ModalAlertController);ModalAlertController.$inject=[];function ModalAlertController(){var vm=this;vm.staticFiles=STATIC_FILES;vm.close=close;function close(){vm.modalInstance.close({answer:true});}}})();(function(){'use strict';angular.module('pclender.lib.modal.confirm').component('confirm',{templateUrl:'../../media/ng/lib/modal/confirm/confirm.html',bindings:{resolve:'<',modalInstance:'<'},controller:'ModalConfirmController',controllerAs:'vm'});})();(function(){'use strict';angular.module('pclender.lib.modal.confirm').controller('ModalConfirmController',ModalConfirmController);ModalConfirmController.$inject=[];function ModalConfirmController(){var vm=this;vm.yes=yes;vm.no=no;function yes(){vm.modalInstance.close({answer:true});}function no(){vm.modalInstance.close({answer:false});}}})();(function(){'use strict';angular.module('pclender.lib.modal.loading').component('loading',{templateUrl:'../../media/ng/lib/modal/loading/loading.html',bindings:{resolve:'<',message:'='},controller:'ModalLoadingController',controllerAs:'vm'});})();(function(){'use strict';angular.module('pclender.lib.modal.loading').controller('ModalLoadingController',ModalLoadingController);ModalLoadingController.$inject=[];function ModalLoadingController(){var vm=this;vm.staticFiles=STATIC_FILES;}})();(function(){'use strict';angular.module('pclenderApp').service('ModalService',ModalService);ModalService.$inject=['$uibModal','$q'];function ModalService($uibModal,$q){Modal.prototype.showLoading=showLoading;Modal.prototype.hideLoading=hideLoading;Modal.prototype.showConfirm=showConfirm;Modal.prototype.showAlert=showAlert;return new Modal();function Modal(){}var modalInstance,confirmModalInstance,alertModalInstance,open=false,openConfirm=false,openAlert=false;/*
         * @name showLoading
         * @desc Show the Loading Modal
         */function showLoading(msg){if(!open){open=true;modalInstance=$uibModal.open({component:'loading',size:'sm',keyboard:false,backdrop:'static',resolve:{message:function message(){return msg;}}});}}/*
         * @name hideLoading
         * @desc Close the Loading Modal
         */function hideLoading(){if(open){modalInstance.dismiss('cancel');open=false;}}/*
         * @name showLoading
         * @desc Show the Confirm Modal
         */function showConfirm(_title3,msg,_yesLabel,_noLabel){if(openConfirm){confirmModalInstance.dismiss('cancel');openConfirm=false;}return $q(function(resolve){openConfirm=true;confirmModalInstance=$uibModal.open({component:'confirm',size:'md',keyboard:false,backdrop:'static',resolve:{message:function message(){return msg;},title:function title(){return _title3;},yesLabel:function yesLabel(){return _yesLabel;},noLabel:function noLabel(){return _noLabel;}}});confirmModalInstance.result.then(function(result){openConfirm=false;resolve(result.answer);});});}/*
         * @name showLoading
         * @desc Show the Confirm Modal
         */function showAlert(_title4,msg){if(openAlert){alertModalInstance.dismiss('cancel');openAlert=false;}return $q(function(resolve){openAlert=true;alertModalInstance=$uibModal.open({component:'alert',size:'md',keyboard:false,backdrop:'static',resolve:{message:function message(){return msg;},title:function title(){return _title4;}}});alertModalInstance.result.then(function(result){openAlert=false;resolve(result.answer);});});}}})();(function(){'use strict';angular.module('common.lib.pagination').component('pagination',{bindings:{totalRecord:'<',recordPerPage:'<',currentPage:'<',select:'&'},controller:'PaginationController',controllerAs:'vm',templateUrl:'../../media/ng/lib/pagination/pagination.html'});})();(function(){'use strict';angular.module('common.lib.pagination').controller('PaginationController',PaginationController);PaginationController.$inject=['$scope'];function PaginationController($scope){var vm=this;vm.$onInit=onInit;vm.handlePageClick=handlePageClick;function onInit(){$scope.$watch('[vm.currentPage, vm.totalRecord]',function(){vm.totalPageCount=Math.ceil(vm.totalRecord/vm.recordPerPage);vm.pages=calculatePages(vm.currentPage,vm.totalPageCount);},true);}function handlePageClick(page){vm.select({page:page});}function calculatePages(currentPage,lastPage){var delta=5;var left=currentPage-delta,right=currentPage+delta+1,range=[],rangeWithDots=[],l;if(left<1){right+=Math.abs(left)+delta-2;}else if(left===1){right+=2;}else if(left===2){right+=1;}if(right>lastPage){left-=right-lastPage+1;}else if(right===lastPage){left-=1;}for(var i=1;i<=lastPage;i++){if(i===1||i===lastPage||i>=left&&i<right){range.push(i);}}for(var _i=0,_range=range;_i<_range.length;_i++){var _i2=_range[_i];if(l){if(_i2-l===2){rangeWithDots.push(l+1);}else if(_i2-l!==1){rangeWithDots.push('...');}}rangeWithDots.push(_i2);l=_i2;}return rangeWithDots;}}})();(function(){'use strict';angular.module('common.lib.radiobutton').component('radioButton',{bindings:{groupName:'<',items:'<',boxType:'<',ngModel:'='},controller:'RadioButtonController',controllerAs:'vm',templateUrl:'../../media/ng/lib/radiobutton/radiobutton.html'});})();(function(){'use strict';angular.module('common.lib.radiobutton').controller('RadioButtonController',RadioButtonController);RadioButtonController.$inject=[];function RadioButtonController(){}})();(function(){'use strict';angular.module('pclenderApp').factory('GlobalVar',function(){return{httpCount:0};}).service('CommonService',[function(){}]).service('DataCheckService',['$q','$http',function($q,$http){var me=this;me.getDataCheck=getDataCheck;me.config={headers:{'Content-Type':'application/x-www-form-urlencoded;charset=utf-8;'}};me.loan_number_id=0;me.datacheck=[];me.showDataCheck=false;function getDataCheck(loanid,type,interfaceID,borrowerList){return $q(function(resolve,reject){var params={loan_number_id:loanid,type:type,"interface":interfaceID,borrower_list:borrowerList};$http.post('data_check_bundle',$.param(params),me.config).then(function(response){if(response.status===200){if(response.data.success){resolve({success:true,data:response.data.data});}else{reject({status:false});}}else{reject({status:false});}});});}}]).service('HttpService',['$q','$http','GlobalVar',function($q,$http,GlobalVar){var me=this;me.httpGet=httpGet;me.httpPost=httpPost;me.httpGetRaw=httpGetRaw;me.uploadFile=uploadFile;me.config={headers:{'Content-Type':'application/x-www-form-urlencoded;charset=utf-8;','Cache-Control':'none','Pragma':'no-cache','If-Modified-Since':'Mon, 26 Jul 1997 05:00:00 GMT','Ajax-Call':'Yes'}};function httpGet(url,params){return $q(function(resolve,reject){GlobalVar.httpCount++;if(!params){params={};}params.ajax=true;var httpParams={url:url,method:'GET',params:params,cache:false,headers:me.config.headers};$http(httpParams).then(function(response){if(response.status===200){if(response.data.success){resolve({success:true,data:response.data.data});}else{reject({status:false,data:response.data});}}else{reject({status:false});}})["catch"](function(response){reject({status:false,msg:response.statusText||''});})["finally"](function(){GlobalVar.httpCount--;});});}function httpGetRaw(url,params){return $q(function(resolve,reject){if(!params){params={};}params.ajax=true;var httpParams={url:url,method:'GET',params:params,headers:me.config.headers};$http(httpParams).then(function(response){if(response.status===200){resolve({success:true,data:response.data});}else{reject({status:false});}})["catch"](function(response){reject({status:false,msg:response.statusText||''});})["finally"](function(){});});}function httpPost(url,params){return $q(function(resolve,reject){GlobalVar.httpCount++;params.ajax=true;$http.post(url,$.param(params),me.config).then(function(response){GlobalVar.httpCount--;if(response.status===200){if(response.data.success){resolve({success:true,data:response.data.data});}else{reject({status:false,msg:response.data&&response.data.msg?response.data.msg:'',data:response.data&&response.data.data?response.data.data:'',error:response.data&&response.data.error||''});}}else{reject({status:false});}})["catch"](function(response){reject({status:false,msg:response.statusText||''});})["finally"](function(){GlobalVar.httpCount--;});});}function uploadFile(url,file,params,headers){return $q(function(resolve,reject){var fd=new FormData();fd.append('file',file);for(var param in params){if(params.hasOwnProperty(param)){fd.append(param,params[param]);}}$http.post(url,fd,{transformRequest:angular.identity,headers:headers}).then(function(response){if(response.status===200){if(response.data.success){resolve({success:true});}}reject({status:false});});});}}]).service('CheckerService',['$q','HttpService','$interval','ModalService',function($q,HttpService,$interval,ModalService){var me=this;me.executeChecker=executeChecker;me.timeLeftAbs=0;function executeChecker(){HttpService.httpGetRaw('wssecurity',{x:Math.random()}).then(function(response){if(response.success){if(response.data.success){window.location.href='logout';}else{if(response.data.show_alert){me.timeLeftAbs=Math.round(response.data.time_left);if(me.timeLeftAbs==1){me.timeLeftAbs=me.timeLeftAbs+' minute';}else if(me.timeLeftAbs>1){me.timeLeftAbs=me.timeLeftAbs+' minutes';}else{me.timeLeftAbs='less than a minute';}ModalService.showConfirm('Warning','Your session will expire in '+me.timeLeftAbs+'. Please click continue to refresh your session.','Refresh Session','Logout').then(function(answer){if(answer){HttpService.httpGet('refresh_session',{x:Math.random()}).then(function(){});}else{window.location.href='logout';}});}}}});}$interval(function(){executeChecker();},30000);}]).service('SecurityService',[function(){var me=this;me.encryptPass=encryptPass;function encryptPass(pass,key){if(pass===''){return'';}/* eslint-disable */return CryptoJS.AES.encrypt(JSON.stringify(pass),key,{format:{'stringify':function stringify(cipherParams){var j={ct:cipherParams.ciphertext.toString(CryptoJS.enc.Base64)};if(cipherParams.iv)j.iv=cipherParams.iv.toString();if(cipherParams.salt)j.s=cipherParams.salt.toString();return JSON.stringify(j).replace(/\s/g,'');},'parse':function parse(jsonStr){var j=JSON.parse(jsonStr);var cipherParams=CryptoJS.lib.CipherParams.create({ciphertext:CryptoJS.enc.Base64.parse(j.ct)});if(j.iv)cipherParams.iv=CryptoJS.enc.Hex.parse(j.iv);if(j.s)cipherParams.salt=CryptoJS.enc.Hex.parse(j.s);return cipherParams;}}}).toString();/* eslint-enable */}}]);})();angular.module('pclenderApp').run(['$templateCache',function($templateCache){'use strict';$templateCache.put('../../media/ng/b2b/home/loan_officer_section/loan_officer_section.html',"<div class=\"b2b-loan-officer-section\" ng-if=\"vm.showLoanOfficerSection\"><div class=\"bio align-left\" ng-repeat=\"bio in vm.bios\"><div ng-if=\"bio.picture\" class=\"div-img\"><img ng-src=\"{{bio.picture | to_trusted}}\"></div><p class=\"loan-officer-name align-center\"><b class=\"text-default\">{{bio.name | whitelist}}<br>{{bio.title | whitelist}}</b></p><div ng-if=\"bio.address || bio.city || bio.state || bio.zip\"><span class=\"glyphicon glyphicon-map-marker float-left\">&nbsp;</span><p class=\"map-name\"><a href=\"https://www.google.com/maps/place/{{bio.address  | whitelist | urlencode}},+{{bio.city | whitelist| urlencode}},+{{bio.state  | whitelist | urlencode}}+,{{bio.zip | whitelist | urlencode}}+,{{bio.country | whitelist | urlencode}}\" target=\"_blank\">{{bio.address | whitelist}} {{bio.city | whitelist}}, {{bio.state | whitelist}} {{bio.zip | whitelist}}</a></p></div><div ng-if=\"bio.voice\"><span class=\"glyphicon glyphicon-earphone float-left\">&nbsp;</span><p>{{bio.voice | whitelist | phone}} <span ng-if=\"bio.ext\">ext. {{bio.ext | whitelist}}</span></p></div><div ng-if=\"bio.fax\"><span class=\"glyphicon glyphicon-print float-left\">&nbsp;</span><p>{{bio.fax | whitelist}}</p></div><div ng-if=\"bio.cellphone\"><span class=\"glyphicon glyphicon-phone float-left\">&nbsp;</span><p>{{bio.cellphone | whitelist | phone}}</p></div><p ng-if=\"bio.email_address\"><span class=\"glyphicon glyphicon-envelope\">&nbsp;</span> <a href=\"mailto:{{bio.email_address | whitelist}}\" title=\"{{bio.email_address | whitelist}}\">{{bio.email_address | whitelist}}</a></p></div></div>");$templateCache.put('../../media/ng/b2b/home/pipeline/expire_password/expire_password.html',"<div class=\"b2b-expire-password\"><div class=\"modal-header\"><b>Password Expire Notification</b></div><div class=\"modal-body\">Your password will expire in {{vm.resolve.numberOfDaysToExpire}} days. If you would like to change your password now, please click Change Password button.</div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" type=\"button\" ng-click=\"vm.changePassword()\"><span class=\"glyphicon glyphicon-lock\"></span> Change Password</button> <button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"vm.close()\">Close</button></div></div>");$templateCache.put('../../media/ng/b2b/home/pipeline/pipeline.html',"<div class=\"b2b-pipeline\"><table class=\"table table-bordered table-hover table-condensed\"><thead><tr class=\"primary_color text_white\"><th>Status</th><th># Loans</th><th>$ Volume</th></tr></thead><tbody><tr ng-repeat=\"pipeline in vm.pipeline\"><td><a href=\"{{vm.baseUrl}}summary?query_id={{vm.pipelineId}}&columns=Loan%20Number,Borrower%20Name,Rate,Loan%20Amount,Conditions&;potential_filters=Status&apply_filters[]=Status%3D{{pipeline.LoanStatus | whitelist}}\">{{pipeline.LoanStatus | whitelist}}</a></td><td>{{pipeline.NumberOfLoans | whitelist}}</td><td class=\"right-align\">{{pipeline.Volume | number:0}}</td></tr></tbody><tbody ng-if=\"vm.loading\"><tr><td colspan=\"3\" class=\"loading-box\"><span>Loading... <img ng-src=\"{{vm.staticFiles}}media/b2b/img/bigrotation2.gif\" alt=\"loading\"></span></td></tr></tbody></table><button class=\"btn btn-primary btn-sm\" ng-click=\"vm.openPrintPipeline()\"><span class=\"glyphicon glyphicon-print\"></span> Show Printable</button></div>");$templateCache.put('../../media/ng/b2b/home/pipeline/print_pipeline/print_pipeline.html',"<div class=\"b2b-print-pipeline\"><div class=\"modal-header\"><b>Loan Status Summary Breakdown</b></div><div class=\"modal-body\"><div id=\"print-div\"><h3 class=\"summary-title\">Loan Status Summary Breakdown</h3><table width=\"100%\" class=\"table table-bordered table-hover table-condensed table-printable\"><thead><tr style=\"text-align: left\"><th>Status</th><th># Loans</th><th>$ Volume</th></tr></thead><tbody><tr ng-repeat=\"pipeline in vm.resolve.pipeline\"><td>{{pipeline.LoanStatus | whitelist}}</td><td>{{pipeline.NumberOfLoans | whitelist}}</td><td class=\"right-align\">{{pipeline.Volume | number:0}}</td></tr></tbody></table></div></div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" type=\"button\" ng-click=\"vm.print()\"><span class=\"glyphicon glyphicon-print\"></span> Print This</button> <button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"vm.close()\">Close</button></div></div>");$templateCache.put('../../media/ng/b2b/home/tpo/change_password/change_password.html',"<div class=\"tpo-change-password\"><form class=\"form-horizontal\" method=\"post\"><div class=\"form-group\"><div class=\"row\"><label class=\"col-sm-2 control-label\">Old Password</label><div class=\"col-sm-5\"><input type=\"password\" maxlength=\"25\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.oldPass\" autocomplete=\"off\" class=\"form-control input-sm\"></div></div></div><div class=\"form-group\"><div class=\"row\"><label class=\"col-sm-2 control-label\">New Password</label><div class=\"col-sm-5\"><input type=\"password\" maxlength=\"25\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.newPass\" autocomplete=\"off\" class=\"form-control input-sm\"></div></div></div><div class=\"form-group\"><div class=\"row\"><label class=\"col-sm-2 control-label\">Confirm Password</label><div class=\"col-sm-5\"><input type=\"password\" maxlength=\"25\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.confirmPass\" autocomplete=\"off\" class=\"form-control input-sm\"></div></div></div><div class=\"form-group\"><div class=\"col-sm-2\"></div><div class=\"col-sm-5\"><button class=\"btn btn-primary btn-sm\" ng-click=\"vm.changePassword()\"><span class=\"glyphicon glyphicon-floppy-disk\"></span> Change Password</button></div></div></form></div>");$templateCache.put('../../media/ng/b2b/home/tpo/contact_info/contact_info.html',"<div class=\"tpo-contact-info\"><div ng-if=\"vm.showTabs\"><uib-tabset active=\"active\"><uib-tab index=\"0\" heading=\"Contact Information\"><uib-tab-heading><span class=\"glyphicon glyphicon-user\"></span> Contact Information</uib-tab-heading><div class=\"tab-content\"><div class=\"panel panel-custom border-1px-primary\"><div class=\"panel-heading header_bg_color\"><span class=\"glyphicon glyphicon-user\"></span> Contact Information</div><div class=\"contact-info-body\"><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"first_name\">First Name</label> <input type=\"text\" id=\"first_name\" maxlength=\"25\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.first_name\" whitelist class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"middle_name\">Middle Name</label> <input type=\"text\" id=\"middle_name\" maxlength=\"30\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.middle_name\" whitelist class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"last_name\">Last Name</label> <input type=\"text\" id=\"last_name\" maxlength=\"35\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.last_name\" whitelist class=\"form-control input-sm\"></div></div></div><div class=\"row\"><div class=\"col-md-8\"><div class=\"form-group\"><label for=\"first_name\">Title</label> <input type=\"text\" id=\"title\" maxlength=\"20\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.title\" whitelist class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"nmlsid\">NMLS#</label> <input type=\"text\" id=\"nmlsid\" maxlength=\"12\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.nmlsid\" whitelist class=\"form-control input-sm\"></div></div></div><div class=\"row\"><div class=\"col-md-8\"><div class=\"form-group\"><label for=\"email\">Email Address</label> <input type=\"email\" id=\"email\" maxlength=\"150\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.email\" whitelist class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"username\">PCLender User Name</label> <input type=\"text\" id=\"username\" maxlength=\"40\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.username\" whitelist class=\"form-control input-sm\"></div></div></div><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"voice\">Phone</label> <input type=\"text\" id=\"voice\" maxlength=\"13\" ng-disabled=\"vm.disabled_form\" input-mask=\"{mask: '(999)999-9999'}\" ng-model=\"vm.contact.voice\" class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"ext\">Extension</label> <input type=\"text\" id=\"ext\" maxlength=\"5\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.ext\" whitelist class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"fax\">Fax</label> <input type=\"text\" id=\"fax\" maxlength=\"13\" ng-disabled=\"vm.disabled_form\" input-mask=\"{mask: '(999)999-9999'}\" ng-model=\"vm.contact.fax\" class=\"form-control input-sm\"></div></div></div><div class=\"row\"><div class=\"col-md-12\"><div class=\"form-group\"><label for=\"address\">Address</label> <input type=\"text\" id=\"address\" maxlength=\"50\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.address\" whitelist class=\"form-control input-sm\"></div></div></div><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"city\">City</label> <input type=\"text\" id=\"city\" maxlength=\"25\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.city\" whitelist class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"state\">State</label> <input type=\"text\" id=\"state\" maxlength=\"2\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.state\" whitelist class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"zip\">Zip</label> <input type=\"text\" id=\"zip\" maxlength=\"10\" ng-disabled=\"vm.disabled_form\" ng-model=\"vm.contact.zip\" whitelist class=\"form-control input-sm\"></div></div></div></div></div></div></uib-tab><uib-tab index=\"1\"><uib-tab-heading><span class=\"glyphicon glyphicon-lock\"></span> Change Password</uib-tab-heading><div class=\"tab-content\"><tpo-change-password></tpo-change-password></div></uib-tab><uib-tab index=\"2\" ng-if=\"vm.showInterfaceCredentialsTab\"><uib-tab-heading><span class=\"glyphicon glyphicon-transfer\"></span> Interface Credentials</uib-tab-heading><div class=\"tab-content\"><tpo-interface-credentials></tpo-interface-credentials></div></uib-tab><uib-tab index=\"3\" ng-if=\"vm.isTpoAdmin\"><uib-tab-heading><span class=\"glyphicon glyphicon-th-list\"></span> User Changes</uib-tab-heading><div class=\"tab-content\"><tpo-user-list></tpo-user-list></div></uib-tab></uib-tabset></div></div>");$templateCache.put('../../media/ng/b2b/home/tpo/interface_credentials/interface_credentials.html',"<div class=\"tpo-interface-credentials\"><div ng-repeat=\"(key, value) in vm.data\" class=\"panel panel-custom border-1px-primary\"><div class=\"panel-heading header_bg_color\"><span class=\"glyphicon glyphicon-transfer\"></span> {{key}}</div><div class=\"interface-body\"><form class=\"form-horizontal\" method=\"post\"><div ng-repeat=\"entry in value\"><div class=\"form-group\"><label class=\"col-sm-3 control-label\">{{entry.DataNameCaption | whitelist}}:</label><div class=\"col-sm-6\"><span class=\"data-value\" ng-if=\"!entry.IsPasswordField\">{{entry.DataNameValue | whitelist}}</span><div ng-class=\"{\r"+"\n"+"                      'has-error': entry.HasError\r"+"\n"+"                    }\"><input type=\"password\" maxlength=\"25\" autocomplete=\"off\" ng-if=\"entry.IsPasswordField\" ng-disabled=\"vm.disabled_form\" ng-model=\"entry.DataNameValue\" class=\"form-control input-sm\"></div></div></div><div class=\"form-group\" ng-if=\"entry.IsPasswordField\"><label class=\"col-sm-3 control-label\">Confirm Password:</label><div class=\"col-sm-6\"><div ng-class=\"{\r"+"\n"+"                      'has-error': entry.HasError\r"+"\n"+"                    }\"><input type=\"password\" maxlength=\"25\" autocomplete=\"off\" ng-disabled=\"vm.disabled_form\" ng-model=\"entry.ConfirmPassword\" class=\"form-control input-sm\"></div></div></div></div></form></div></div><div class=\"alert alert-warning\" ng-if=\"!vm.showSaveButton()\">No Interface Credentials Available</div><div class=\"padding-bottom-20\"><button class=\"btn btn-primary btn-sm\" ng-if=\"vm.showSaveButton()\" ng-disabled=\"vm.disableSaveButton()\" ng-click=\"vm.save()\"><span class=\"glyphicon glyphicon-floppy-disk\"></span> Save</button></div></div>");$templateCache.put('../../media/ng/b2b/home/tpo/user_list/status_form/status_form.html',"<div class=\"tpo-status-form\"><div class=\"modal-header\"><b>History</b></div><div class=\"modal-body\"><table class=\"table table-bordered table-hover\"><thead><th>Field Name</th><th>Old Value</th><th>New Value</th><th>Status</th><th>Date</th></thead><tbody><tr ng-repeat=\"status in vm.status\"><td>{{status.FieldName | whitelist}}</td><td>{{vm.getValue(status.FieldName, status.OldValue) | whitelist}}</td><td>{{vm.getValue(status.FieldName, status.NewValue) | whitelist}}</td><td>{{status.QueueStatus | whitelist}}</td><td>{{status.EditDate | whitelist}}</td></tr></tbody></table></div><div class=\"modal-footer\"><button class=\"btn btn-default btn-sm\" ng-click=\"vm.cancel()\">Close</button></div></div>");$templateCache.put('../../media/ng/b2b/home/tpo/user_list/submit/submit.html',"<div class=\"tpo-submit\"><div class=\"modal-header\"><b>Confirm Submission</b></div><div class=\"modal-body\"><div ng-if=\"vm.showEditedUsers\"><div><label>Existing User(s)</label></div><div ng-repeat=\"user in vm.resolve.editedUsers\"><div>Name: {{user.userInfo.FirstName | whitelist}} {{user.userInfo.LastName | whitelist}}</div><div><table class=\"table table-bordered table-hover\"><thead><th>Field Name</th><th>Old Value</th><th>New Value</th></thead><tbody><tr ng-repeat=\"(key, value) in user.changes\"><td>{{key | whitelist}}</td><td>{{vm.getValue(key, user.userInfo[key]) | whitelist}}</td><td>{{vm.getValue(key, value) | whitelist}}</td></tr></tbody></table></div></div><div></div></div><div ng-if=\"vm.resolve.newUsers.length > 0\"><div><label>New User(s)</label></div><div ng-repeat=\"user in vm.resolve.newUsers\"><div>Name: {{user.changes.FirstName | whitelist}} {{user.changes.LastName | whitelist}}</div><div><table class=\"table table-bordered table-hover\"><thead><th>Field Name</th><th>Value</th></thead><tbody><tr ng-repeat=\"(key, value) in user.changes\" ng-if=\"key !== 'ContactID'\"><td>{{key | whitelist}}</td><td>{{vm.getValue(key, value) | whitelist}}</td></tr></tbody></table></div></div></div></div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" ng-click=\"vm.submit()\"><span class=\"glyphicon glyphicon-floppy-disk\"></span> Submit</button> <button class=\"btn btn-default btn-sm\" ng-click=\"vm.cancel()\">Close</button></div></div>");$templateCache.put('../../media/ng/b2b/home/tpo/user_list/user_form/user_form.html',"<div class=\"tpo-user-form\"><div class=\"modal-header\"><b>{{vm.modalTitle}}</b></div><div class=\"modal-body\"><form name=\"userForm\"><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"first_name\">First Name</label><div class=\"flex-container\"><label class=\"required-character\">*</label> <input type=\"text\" id=\"first_name\" maxlength=\"25\" ng-model=\"vm.userForm.FirstName\" ng-blur=\"vm.validateUserName()\" whitelist class=\"form-control input-sm is-required\"></div></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"middle_name\">Middle Name</label> <input type=\"text\" id=\"middle_name\" maxlength=\"30\" ng-model=\"vm.userForm.MiddleName\" whitelist class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"last_name\">Last Name</label><div class=\"flex-container\"><label class=\"required-character\">*</label> <input type=\"text\" id=\"last_name\" maxlength=\"35\" ng-model=\"vm.userForm.LastName\" ng-blur=\"vm.validateUserName()\" whitelist class=\"form-control input-sm is-required\"></div></div></div></div><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"contactType\">Contact Type</label> <select type=\"text\" id=\"contactType\" ng-model=\"vm.userForm.ContactType\" ng-options=\"o as o for o in vm.resolve.contactTypes\" ng-change=\"vm.isIncomplete()\" class=\"form-control input-sm\"></select></div></div><div class=\"col-md-8\"><div class=\"form-group\"><label for=\"email\">Email Address</label><div ng-class=\"{\r"+"\n"+"                            'has-error': !userForm.EmailAddress.$valid\r"+"\n"+"                            }\"><div class=\"flex-container\"><label class=\"required-character\">*</label> <input type=\"email\" id=\"email\" maxlength=\"150\" name=\"EmailAddress\" ng-model=\"vm.userForm.EmailAddress\" whitelist class=\"form-control input-sm is-required\"></div></div></div></div></div><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"first_name\">Title</label><div class=\"flex-container\"><label class=\"required-character\">*</label> <input type=\"text\" id=\"title\" maxlength=\"20\" ng-model=\"vm.userForm.Title\" whitelist class=\"form-control input-sm is-required\"></div></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"phone\">Phone</label><div class=\"flex-container\"><label class=\"required-character\">*</label> <input type=\"text\" id=\"phone\" maxlength=\"13\" ng-model=\"vm.userForm.Phone\" input-mask=\"{mask: '(999)999-9999'}\" class=\"form-control input-sm is-required\"></div></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"ext\">Ext</label> <input type=\"text\" id=\"ext\" maxlength=\"5\" ng-model=\"vm.userForm.Extension\" whitelist class=\"form-control input-sm\"></div></div></div><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"mobile\">Mobile</label> <input type=\"text\" id=\"mobile\" maxlength=\"13\" ng-model=\"vm.userForm.Mobile\" input-mask=\"{mask: '(999)999-9999'}\" class=\"form-control input-sm\"></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"nmls\">NMLS#</label><div class=\"flex-container\"><label class=\"required-character\">*</label> <input type=\"text\" id=\"nmls\" maxlength=\"12\" ng-model=\"vm.userForm.NMLSID\" whitelist ng-change=\"vm.isIncomplete()\" class=\"form-control input-sm is-required\"></div><span ng-show=\"vm.incompleteFields\" style=\"color: red\"><small>NMLS number is required for Broker Contact Type</small></span></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"nmlsExp\">Expiration</label> <input type=\"text\" id=\"nmlsExp\" maxlength=\"12\" ng-model=\"vm.userForm.NMLSIDExpiration\" date-picker input-mask=\"{mask: '99/99/9999'}\" class=\"form-control input-sm\"></div></div></div><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"username\">Username</label><div class=\"flex-container\"><label class=\"required-character\">*</label><div class=\"picker-group\"><div class=\"input-group\"><input type=\"text\" id=\"username\" maxlength=\"12\" ng-disabled=\"!vm.isNew\" ng-model=\"vm.userForm.UserName\" class=\"form-control input-sm is-required\"> <span class=\"input-group-btn\"><button class=\"btn btn-default btn-sm\" ng-disabled=\"vm.disabled_form || !vm.isNew\" ng-click=\"vm.testUsername(vm.userForm.FirstName, vm.userForm.LastName, vm.userForm.UserName)\" type=\"button\">Check</button></span></div></div></div></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"tpoRole\">TPO Role</label><div class=\"flex-container\"><label class=\"required-character\">*</label> <select type=\"text\" id=\"tpoRole\" ng-model=\"vm.TPORoleID\" ng-options=\"item as item.value for item in vm.resolve.roles track by item.id\" class=\"form-control input-sm is-required\"></select></div></div></div><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"contactGroups\">Groups</label> <select class=\"form-control input-sm\" ng-model=\"vm.userForm.Groups\" multiple=\"true\" ng-options=\"item as item.GroupName for item in vm.resolve.contactGroups track by item.GroupID\"></select></div></div></div><div class=\"row\"><div class=\"col-md-4\"><div class=\"form-group\"><label for=\"contactMember\">Member</label> <select class=\"form-control input-sm\" ng-model=\"vm.userForm.Member\" multiple=\"true\" ng-options=\"item as item.MemberName for item in vm.resolve.contactMember track by item.MemberID\"></select></div></div></div></form></div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" ng-disabled=\"!vm.isValid()\" ng-click=\"vm.save()\"><span class=\"glyphicon glyphicon-floppy-disk\"></span> Save</button> <button class=\"btn btn-default btn-sm\" ng-click=\"vm.cancel()\"><span class=\"glyphicon glyphicon-remove\"></span> Cancel</button></div></div>");$templateCache.put('../../media/ng/b2b/home/tpo/user_list/user_list.html',"<div class=\"tpo-user-list\"><div class=\"form-group\"><span class=\"help-text\">* Complete adding and editing for ALL users before submitting for approval.</span></div><div class=\"form-group\"><div class=\"row\"><div class=\"col-md-6\"><button type=\"button\" ng-click=\"vm.openUserForm()\" ng-if=\"vm.access.CanAdd\" class=\"btn btn-primary btn-sm\"><span class=\"glyphicon glyphicon-plus\"></span> Add User</button></div><div class=\"col-md-6\"><div class=\"text-align-right\" ng-if=\"vm.access.CanDeActivate || vm.access.CanEdit || vm.access.CanAdd\"><button class=\"btn btn-default btn-sm\" ng-disabled=\"!vm.isSubmitEnabled()\" ng-click=\"vm.reset()\">Cancel</button> <button class=\"btn btn-primary btn-sm\" ng-disabled=\"!vm.isSubmitEnabled()\" ng-click=\"vm.submitAll()\">Review and Submit All Changes</button></div></div></div></div><div class=\"panel panel-custom border-1px-primary table-responsive\"><div class=\"panel-heading header_bg_color\"><span class=\"glyphicon glyphicon-user\"></span> Existing User <a href=\"javascript:void(0)\" class=\"pull-right text-white\" ng-click=\"vm.load()\"><span class=\"glyphicon glyphicon-repeat\"></span></a></div><div class=\"panel table\"><table class=\"table table-bordered table-hover\"><thead><th class=\"header active\" ng-repeat=\"header in vm.tableHeaders\"><a class=\"link\" href=\"javascript:void(0)\" ng-click=\"vm.sortBy(header);\">{{header | whitelist}}</a> <span ng-if=\"vm.orderBy === header || (vm.orderBy === 'FirstName' && header === 'Name')\" ng-class=\"{\r"+"\n"+"                            'glyphicon': true,\r"+"\n"+"                            'glyphicon-menu-down': vm.reverse,\r"+"\n"+"                            'glyphicon-menu-up': !vm.reverse,\r"+"\n"+"                        }\"></span></th><th ng-if=\"vm.access.CanDeActivate || vm.access.CanEdit\"></th></thead><tbody><tr ng-repeat=\"user in vm.users | orderBy : vm.orderBy : vm.reverse\"><td>{{user.FirstName | whitelist}} {{user.LastName | whitelist}}</td><td>{{user.Title | whitelist}}</td><td>{{user.Phone | whitelist}} <span ng-if=\"user.ext\">x</span> {{user.Extension | whitelist}}</td><td>{{user.EmailAddress | whitelist}}</td><td>{{user.NMLSID | whitelist}}</td><td class=\"active\"><a href=\"javascript:void(0)\" class=\"link\" ng-if=\"user.QueueStatus !== 'No Queue'\" ng-click=\"vm.showPendingStatus(user)\">{{user.QueueStatus | whitelist}}</a></td><td class=\"text-align-center\" ng-if=\"vm.access.CanDeActivate || vm.access.CanEdit\" width=\"200\"><button type=\"button\" ng-if=\"(user.PreviousContact === 'N' || user.PreviousContact === '' ) && vm.access.CanDeActivate\" ng-click=\"vm.deactivateContact(user)\" class=\"btn btn-danger btn-sm\"><span class=\"glyphicon glyphicon-trash\"></span> Deactivate</button> <button type=\"button\" ng-if=\"user.PreviousContact === 'Y' && vm.access.CanDeActivate\" ng-click=\"vm.activateContact(user)\" class=\"btn btn-warning btn-sm\"><span class=\"glyphicon glyphicon-refresh\"></span> Activate</button> <button type=\"button\" ng-click=\"vm.openUserForm(user)\" ng-if=\"vm.access.CanEdit\" class=\"btn btn-primary btn-sm\"><span class=\"glyphicon glyphicon-edit\"></span> Edit</button></td></tr></tbody></table></div></div><div class=\"form-group\"><span class=\"help-text\">* Complete adding and editing for ALL users before submitting for approval.</span></div><div class=\"text-align-center padding-bottom-20\" ng-if=\"vm.access.CanDeActivate || vm.access.CanEdit || vm.access.CanAdd\"><button class=\"btn btn-default btn-sm\" ng-disabled=\"!vm.isSubmitEnabled()\" ng-click=\"vm.reset()\">Cancel</button> <button class=\"btn btn-primary btn-sm\" ng-disabled=\"!vm.isSubmitEnabled()\" ng-click=\"vm.submitAll()\">Review and Submit All Changes</button></div></div>");$templateCache.put('../../media/ng/lib/alert/alert.html',"<div id=\"b2balerts\"><div class=\"modal fade\" id=\"myAlertModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\"><div class=\"modal-dialog\" role=\"document\"><div class=\"modal-content\"><div class=\"modal-header\" style=\"height: 40px; padding-top: 10px\"><h4 class=\"modal-title\" id=\"myModalLabel\" style=\"color: #333\">{{vm.title}}</h4></div><div class=\"modal-body\" style=\"color: #333\" ng-bind-html=\"vm.msg | to_trusted\"></div><div class=\"modal-footer\" style=\"height: 40px; padding-top: 5px\"><button type=\"button\" id=\"alert-button-modal\" class=\"btn btn-default btn-sm\" data-dismiss=\"modal\">Close</button></div></div></div></div></div>");$templateCache.put('../../media/ng/lib/confirm/confirm.html',"<div id=\"b2bconfirm\"><div class=\"modal fade\" data-backdrop=\"static\" id=\"myConfirmModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\"><div class=\"modal-dialog\" role=\"document\"><div class=\"modal-content\"><div class=\"modal-header\" style=\"height: 40px; padding-top: 10px\"><h4 class=\"modal-title\" id=\"myModalLabel\">{{vm.title}}</h4></div><div class=\"modal-body\" ng-bind-html=\"vm.msg | to_trusted\"></div><div class=\"modal-footer\" style=\"height: 40px; padding-top: 5px\"><button type=\"button\" class=\"btn btn-primary btn-sm\" ng-click=\"vm.clickYes()\" id=\"confirm-yes-modal\"><span class=\"glyphicon glyphicon-ok\"></span> {{vm.yesLabel}}</button> <button type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"vm.clickNo()\" id=\"confirm-no-modal\"><span class=\"glyphicon glyphicon-remove\"></span> {{vm.noLabel}}</button></div></div></div></div></div>");$templateCache.put('../../media/ng/lib/image_upload/dropbox_uploader/dropbox_uploader.html',"<div class=\"dropbox-uploader\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" ng-click=\"vm.close()\"><span aria-hidden=\"true\">&times;</span></button> <span class=\"modal-title\" ng-if=\"!vm.title\">Loan Number: <b>{{vm.loanNumberId}}</b> </span><span class=\"modal-title\" ng-if=\"vm.title\">{{vm.title}}</span></div><div class=\"modal-body\"><p ng-if=\"vm.docNameMessage\"><b>Document:</b> <span id=\"doc_name\" ng-bind-html=\"vm.docNameMessage | to_trusted\"></span></p><div id=\"condition_desc\" ng-bind-html=\"vm.condition.Description | to_trusted\">{{vm.condition.Description}}</div><ng-dropzone options=\"vm.dzOptions\" callbacks=\"vm.dzCallbacks\" methods=\"vm.dzMethods\"></ng-dropzone><div id=\"previews\"></div><div class=\"note-box\"><i>Note: File size limit is 100mb.<br>File names may not contain more than one period.<br>Password protected files are not supported.<br>A large file will take a longer time to upload to LOS.</i></div></div><div class=\"modal-footer\"><div id=\"container\"><button type=\"button\" ng-disabled=\"vm.isOnProcess\" class=\"btn btn-primary fileinput-button\"><span class=\"glyphicon glyphicon-file\"></span> <span>Select File(s)</span></button> <button type=\"button\" class=\"btn btn-default\" ng-disabled=\"vm.isOnStarted\" ng-click=\"vm.startUpload()\" id=\"start-upload\"><span class=\"glyphicon glyphicon-upload\"></span> <span>Start upload</span></button> <button class=\"btn btn-default\" type=\"button\" ng-click=\"vm.close()\">Close</button></div></div></div>");$templateCache.put('../../media/ng/lib/image_upload/image_uploader/image_uploader.html',"<div class=\"image-uploader\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" ng-click=\"vm.closeModal(vm.filesUploaded)\"><span aria-hidden=\"true\">&times;</span></button> <span class=\"modal-title\">Upload Document to Submit</span></div><div class=\"modal-body\"><p ng-if=\"vm.docNameMessage\"><b>Document:</b> <span id=\"doc_name\" ng-bind-html=\"vm.docNameMessage | to_trusted\"></span></p><div id=\"condition_desc\" ng-bind-html=\"vm.condition.Description | to_trusted\">{{vm.condition.Description}}</div><br><div id=\"filelist\"><p ng-bind-html=\"vm.missingFSHSupportMessage | to_trusted\"></p><div ng-repeat=\"file in vm.files\"><div id=\"file.id\">{{file.name}} ({{vm.convertFileSize(file.size)}}) {{file.percent}}% <a class=\"btn btn-xs\" ng-click=\"vm.removeFile(file)\">Remove</a><b></b></div></div></div><br><div id=\"console\" style=\"{{vm.consoleStyle}}\"><span ng-bind-html=\"vm.consoleMessage | to_trusted\"></span></div><div class=\"wait-msg\" ng-if=\"vm.showOpenLogs\">Please wait while we process the file in the backend... Click <a class=\"link-blue\" ng-click=\"vm.openLogs()\" href=\"javascript: void(0)\">here</a> to view the logs.</div><br><div id=\"main_progress\" class=\"progress\" style=\"{{vm.progressDisplay}}\"><div class=\"progress-bar progress-bar-striped active\" id=\"upload_progress_bar\" role=\"progressbar\" aria-valuenow=\"vm.total.percent\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"{{vm.progressStyleWidth}}\"><span class=\"sr-only\">0% Complete {{vm.total.uploaded}} of {{plupload.vm.total.size}}</span></div></div></div><div class=\"note-box\"><i>Note: File size limit is 100mb<br>Password protected files are not supported<br>A large file will take a longer time to upload to LOS</i></div><div class=\"modal-footer\"><div id=\"container\"><a class=\"btn btn-primary\" id=\"pickfiles\" plupload=\"vm.fileUpload.url\" plupload-options=\"vm.fileUpload.options\" plupload-callbacks=\"vm.fileUpload.callbacks\" ng-disabled=\"vm.pickDisabled\"><span class=\"glyphicon glyphicon-file\"></span> Select File </a><a class=\"btn btn-default\" id=\"uploadfiles\" ng-click=\"vm.uploadStart()\" ng-disabled=\"vm.uploadDisabled\"><span class=\"glyphicon glyphicon-upload\"></span> Start Upload </a><button class=\"btn btn-default\" type=\"button\" ng-disabled=\"vm.closeDisabled\" ng-click=\"vm.cancel(vm.filesUploaded)\">Close</button></div></div></div>");$templateCache.put('../../media/ng/lib/image_upload/upload_logs/upload_logs.html',"<div class=\"upload-logs\"><div class=\"modal-header\">{{vm.resolve.condition.Description}}</div><div class=\"modal-body\"><table class=\"table\"><thead><tr><th width=\"100\">Status</th><th>File Name</th><th>Date Time</th><th>Last Msg</th></tr></thead><tbody><tr ng-repeat-start=\"item in vm.items\" ng-click=\"vm.collapse(item)\" ng-class=\"{\r"+"\n"+"                        'upload-row': true,\r"+"\n"+"                        'text-success': item.status === vm.status.SUCCESS,\r"+"\n"+"                        'text-danger': item.status === vm.status.FAILED,\r"+"\n"+"                    }\"><td><b><div ng-if=\"item.status === vm.status.PENDING\"><span class=\"glyphicon glyphicon-transfer\"></span> Ongoing</div><div ng-if=\"item.status === vm.status.SUCCESS\"><span class=\"glyphicon glyphicon-ok\"></span> Success</div><div ng-if=\"item.status === vm.status.FAILED\"><span class=\"glyphicon glyphicon-remove\"></span> Failed</div></b></td><td>{{item.file_path}}</td><td>{{item.ts}}</td><td>{{item.last_msg}}</td></tr><tr ng-repeat-end uib-collapse=\"!vm.collapseIds[item.id]\"><td colspan=\"4\"><div ng-bind-html=\"item.status_msg | to_trusted\"></div></td></tr><tr><td colspan=\"4\" class=\"loading-box\">&nbsp; <span ng-if=\"vm.loading\"><img ng-src=\"{{vm.STATIC_FILES}}media/b2b/img/bigrotation2.gif\" alt=\"loading\"></span></td></tr></tbody></table></div><div class=\"modal-footer\"><button class=\"btn btn-default\" type=\"button\" ng-click=\"vm.clearLogs()\">Clear Logs</button> <button class=\"btn btn-default\" type=\"button\" ng-click=\"vm.close()\">Close</button></div></div>");$templateCache.put('../../media/ng/lib/image_viewer/image_viewer.html',"<div class=\"image-viewer\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" ng-click=\"vm.close()\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button><h5 class=\"modal-title\">Image Viewer</h5></div><div class=\"modal-body\"><div class=\"row\"><div id=\"imaging-thubmnail-section\" class=\"col-md-3\"><div class=\"dvthumbnail\" ng-repeat=\"x in vm.imageDataTemp track by $index\"><img class=\"imgthumbnail lazy\" ng-src=\"\" data-status-id=\"{{x.statusid}}\" data-image-id=\"{{x.imageid}}\" data-page-number=\"{{x.pageindex}}\" ng-click=\"vm.showPage($index)\"><br>Page {{$index+1}}</div></div><div class=\"col-md-8\"><div class=\"page-section\"><div class=\"btn-group\"><button class=\"btn btn-default btn-sm\" ng-disabled=\"vm.isZoomInDisabled() || vm.showIframe\" ng-click=\"vm.zoomIn()\"><span class=\"glyphicon glyphicon-plus\"></span>&nbsp;Zoom In</button> <button class=\"btn btn-default btn-sm\" ng-disabled=\"vm.isZoomOutDisabled() || vm.showIframe\" ng-click=\"vm.zoomOut()\"><span class=\"glyphicon glyphicon-minus\"></span>&nbsp;Zoom Out</button> <button class=\"btn btn-default btn-sm\" ng-disabled=\"vm.showIframe\" ng-click=\"vm.downloadCurrentPage()\"><span class=\"glyphicon glyphicon-floppy-save\"></span> Download Page</button> <button class=\"btn btn-default btn-sm\" ng-disabled=\"vm.showIframe\" ng-click=\"vm.printCurrentPage()\"><span class=\"glyphicon glyphicon-print\"></span> Print Page</button> <button class=\"btn btn-default btn-sm\" ng-click=\"vm.downloadAllPage()\"><span class=\"glyphicon glyphicon-download-alt\"></span> Download All</button> <button class=\"btn btn-default btn-sm\" ng-click=\"vm.printAll()\"><span class=\"glyphicon glyphicon-print\"></span> Print All</button></div></div><div><div id=\"current-page\"><img ng-style=\"vm.imageStyle\" ng-src=\"{{vm.selectedPageImage}}\"></div><div style=\"display: none\"><div id=\"all-page\"><div ng-repeat=\"page in vm.allPages track by $index\"><img width=\"100%\" image-on-load=\"vm.onImageOnLoad()\" ng-src=\"getPageImage?image_guid={{page.ImageURL}}\"></div></div></div></div></div></div></div><div class=\"modal-footer\"><button class=\"btn btn-default\" type=\"button\" ng-click=\"vm.close()\">Close</button></div></div>");$templateCache.put('../../media/ng/lib/loading/loading.html',"<div id=\"dvLoading\"><div id=\"myLoadingModal\" data-backdrop=\"static\" class=\"modal fade bs-example-modal-sm\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"><div class=\"modal-dialog modal-sm\"><div class=\"modal-content\"><div class=\"modal-body\" style=\"text-align: center\"><span id=\"loading_msg\" style=\"color: #888\">{{vm.loading_msg}}</span><br><img ng-src=\"{{vm.static_files}}media/b2b/img/bigrotation2.gif\" alt=\"loading\"></div></div></div></div></div>");$templateCache.put('../../media/ng/lib/lookup/company/company.html',"<div class=\"company-lookup\"><div class=\"modal-header\"><b>{{vm.resolve.title}}</b></div><div class=\"modal-body\"><div class=\"margin-b10\"><ul class=\"nav nav-tabs\" role=\"tablist\"><li role=\"presentation\" ng-if=\"vm.resolve.showExistingCompanyTab\" ng-class=\"{\r"+"\n"+"                        'active': vm.activeTab === vm.tab.ADD_EXISTING\r"+"\n"+"                    }\"><a href=\"javascript:void(0)\" role=\"tab\" ng-click=\"vm.changeTab(vm.tab.ADD_EXISTING)\" data-toggle=\"tab\"><span class=\"glyphicons glyphicons-building\"></span> Select Existing Company</a></li><li role=\"presentation\" ng-if=\"vm.resolve.showExistingCompanyTab\" ng-class=\"{\r"+"\n"+"                        'active': vm.activeTab === vm.tab.NEW\r"+"\n"+"                    }\"><a href=\"javascript:void(0)\" role=\"tab\" ng-click=\"vm.changeTab(vm.tab.NEW)\" data-toggle=\"tab\"><span class=\"glyphicon glyphicon-plus\"></span> Add New Company</a></li><li role=\"presentation\" ng-if=\"vm.resolve.showExistingContactTab\" ng-class=\"{\r"+"\n"+"                        'active': vm.activeTab === vm.tab.ADD_EXISTING_CONTACT\r"+"\n"+"                    }\"><a href=\"javascript:void(0)\" role=\"tab\" ng-click=\"vm.changeTab(vm.tab.ADD_EXISTING_CONTACT)\" data-toggle=\"tab\"><span class=\"glyphicons glyphicons-user\"></span> Select Existing Contact</a></li><li role=\"presentation\" ng-if=\"vm.resolve.showAddContactTab\" ng-class=\"{\r"+"\n"+"                        'active': vm.activeTab === vm.tab.NEW_CONTACT\r"+"\n"+"                    }\"><a href=\"javascript:void(0)\" role=\"tab\" ng-click=\"vm.changeTab(vm.tab.NEW_CONTACT)\" data-toggle=\"tab\"><span class=\"glyphicons glyphicons-user-add\"></span> Add New Contact</a></li></ul></div><div ng-if=\"vm.activeTab === vm.tab.ADD_EXISTING\"><form class=\"form-inline search-form\"><div class=\"form-group\"><label for=\"searchCompanyName\">Company Name Starts With</label> <input type=\"text\" class=\"form-control input-sm\" id=\"searchCompanyName\" ng-model=\"vm.search.companyName\" placeholder=\"Enter Company Name\"></div><button type=\"submit\" ng-click=\"vm.searchCompany()\" class=\"btn btn-primary btn-sm\"><span class=\"glyphicon glyphicon-search\"></span> Search</button></form><table class=\"table table-bordered table-hover table-striped\"><thead><tr><td>Company Name</td><td>Branch</td><td>Address</td><td>City</td><td>State</td><td>Status</td></tr></thead><tr ng-repeat=\"company in vm.companies\" ng-click=\"vm.selectCompany(company)\" class=\"company-row\" ng-class=\"{\r"+"\n"+"                      'info': vm.selectedCompany.CompanyID == company.CompanyID\r"+"\n"+"                  }\"><td>{{company.CompanyName}}</td><td>{{company.Branch}}</td><td>{{company.Address}}</td><td>{{company.City}}</td><td>{{company.State}}</td><td>{{company.Status}}</td></tr><tr ng-if=\"vm.loading\"><td colspan=\"6\"><b><img class=\"img-rotation\" ng-src=\"{{vm.staticFiles}}/media/b2b/img/bigrotation2.gif\"> Loading...</b></td></tr><tr ng-if=\"!vm.loading\"><td colspan=\"6\">{{vm.getSearchInfo(vm.companySearch)}}</td></tr></table><div ng-if=\"vm.companySearch.numberOfPage > 1\" class=\"pagination-section\"><pagination total-record=\"vm.companySearch.recordList.length\" record-per-page=\"10\" current-page=\"vm.companySearch.currentPage\" select=\"vm.changeCompanySearchPage(page)\"></pagination></div></div><div ng-if=\"vm.activeTab === vm.tab.NEW\"><div class=\"row\"><div class=\"col-md-6\"><form class=\"form-horizontal\" autocomplete=\"false\"><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Company Name</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"80\" tabindex=\"1\" ng-model=\"vm.company.Company_Name\" class=\"form-control input-sm required\" placeholder=\"Company Name\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Suite</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"20\" tabindex=\"3\" ng-model=\"vm.company.Suite\" class=\"form-control input-sm\" placeholder=\"Suite\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">State</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"2\" tabindex=\"5\" ng-model=\"vm.company.State\" class=\"form-control input-sm required\" placeholder=\"State\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">County</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"50\" tabindex=\"9\" ng-model=\"vm.company.County\" class=\"form-control input-sm\" placeholder=\"County\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Verify Attention</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"50\" tabindex=\"11\" ng-model=\"vm.company.Verify_Attention\" class=\"form-control input-sm\" placeholder=\"Verify Attention\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Fax 1</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"12\" tabindex=\"13\" ng-model=\"vm.company.Fax_1\" class=\"form-control input-sm\" placeholder=\"Fax 1\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">License State Number</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"15\" tabindex=\"13\" ng-model=\"vm.companyLicenseType.LicenseNumber\" class=\"form-control input-sm\" placeholder=\"License Number\"></div></div></form></div><div class=\"col-md-6\"><form class=\"form-horizontal\" autocomplete=\"false\"><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Address</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"80\" tabindex=\"2\" class=\"form-control input-sm required\" ng-model=\"vm.company.Address\" placeholder=\"Address\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">City</label><div class=\"col-sm-8\"><input type=\"text\" tabindex=\"4\" maxlength=\"25\" class=\"form-control input-sm required\" ng-model=\"vm.company.City\" placeholder=\"City\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Zip</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"10\" tabindex=\"6\" ng-model=\"vm.company.Zip\" class=\"form-control input-sm required\" placeholder=\"Zip\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Email Address</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"150\" tabindex=\"8\" class=\"form-control input-sm\" ng-model=\"vm.company.EMailAddress\" placeholder=\"Email Address\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Voice</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"10\" tabindex=\"10\" class=\"form-control input-sm\" ng-model=\"vm.company.Voice\" placeholder=\"Voice\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Fax 2</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"12\" tabindex=\"12\" class=\"form-control input-sm\" ng-model=\"vm.company.Fax_2\" placeholder=\"Fax\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">NMLS ID</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"12\" tabindex=\"14\" class=\"form-control input-sm\" ng-model=\"vm.company.NMLSID\" placeholder=\"NMLS ID\"></div></div></form></div></div></div><div ng-if=\"vm.activeTab === vm.tab.ADD_EXISTING_CONTACT\"><form class=\"form-inline search-form\"><div class=\"form-group\"><label for=\"searchContactName\">Last Name Starts With</label> <input type=\"text\" class=\"form-control input-sm\" id=\"searchContactName\" ng-model=\"vm.search.contactName\" placeholder=\"Enter Last Name\"></div><button type=\"submit\" ng-click=\"vm.searchContacts()\" class=\"btn btn-primary btn-sm\"><span class=\"glyphicon glyphicon-search\"></span> Search</button></form><table class=\"table table-bordered table-hover table-striped\"><thead><tr><td>Last Name</td><td>First Name</td><td>Company</td><td>Status</td><td>City</td><td>State</td></tr></thead><tr ng-repeat=\"contact in vm.contacts\" ng-click=\"vm.selectContact(contact)\" class=\"company-row\" ng-class=\"{\r"+"\n"+"                    'info': vm.selectedContact.ContactID == contact.ContactID\r"+"\n"+"                }\"><td>{{contact.LastName}}</td><td>{{contact.FirstName}}</td><td>{{contact.CompanyName}}</td><td>{{contact.CompanyStatus}}</td><td>{{contact.CompanyCity}}</td><td>{{contact.CompanyState}}</td></tr><tr ng-if=\"vm.loading\"><td colspan=\"6\"><b><img class=\"img-rotation\" ng-src=\"{{vm.staticFiles}}/media/b2b/img/bigrotation2.gif\"> Loading...</b></td></tr><tr ng-if=\"!vm.loading\"><td colspan=\"6\">{{vm.getSearchInfo(vm.contactSearch)}}</td></tr></table><div ng-if=\"vm.contactSearch.numberOfPage > 1\" class=\"pagination-section\"><pagination total-record=\"vm.contactSearch.recordList.length\" record-per-page=\"10\" current-page=\"vm.contactSearch.currentPage\" select=\"vm.changeContactSearchPage(page)\"></pagination></div></div><div ng-if=\"vm.activeTab === vm.tab.NEW_CONTACT\"><div class=\"row\"><div class=\"col-md-6\"><form class=\"form-horizontal\" autocomplete=\"false\"><div class=\"form-group\"><label class=\"col-sm-4 control-label\">First Name</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"80\" tabindex=\"1\" ng-model=\"vm.newContact.First_Name\" class=\"form-control input-sm required\" placeholder=\"First Name\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Middle Name</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"20\" tabindex=\"3\" ng-model=\"vm.newContact.Middle_Name\" class=\"form-control input-sm\" placeholder=\"Middle Name\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Cell</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"10\" tabindex=\"5\" ng-model=\"vm.newContact.Cell\" class=\"form-control input-sm\" placeholder=\"Cell\"></div></div></form></div><div class=\"col-md-6\"><form class=\"form-horizontal\" autocomplete=\"false\"><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Last Name</label><div class=\"col-sm-8\"><input type=\"text\" maxlength=\"80\" tabindex=\"2\" class=\"form-control input-sm required\" ng-model=\"vm.newContact.Last_Name\" placeholder=\"Last Name\"></div></div><div class=\"form-group\"><label class=\"col-sm-4 control-label\">Email Address</label><div class=\"col-sm-8\"><input type=\"text\" tabindex=\"4\" maxlength=\"25\" class=\"form-control input-sm\" ng-model=\"vm.newContact.EMail_Address\" placeholder=\"Email Address\"></div></div></form></div></div></div></div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" type=\"button\" ng-if=\"vm.activeTab === vm.tab.ADD_EXISTING\" ng-disabled=\"!vm.selectedCompany\" ng-click=\"vm.save()\">Select</button> <button class=\"btn btn-primary btn-sm\" type=\"button\" ng-if=\"vm.activeTab === vm.tab.NEW\" ng-disabled=\"!vm.isAddCompanyEnabled()\" ng-click=\"vm.createAndSave()\">Select</button> <button class=\"btn btn-primary btn-sm\" type=\"button\" ng-if=\"vm.activeTab === vm.tab.ADD_EXISTING_CONTACT\" ng-disabled=\"!vm.selectedContact\" ng-click=\"vm.selectExistingContact()\">Select</button> <button class=\"btn btn-primary btn-sm\" type=\"button\" ng-if=\"vm.activeTab === vm.tab.NEW_CONTACT\" ng-disabled=\"!vm.isAddNewContactEnabled()\" ng-click=\"vm.addAndSelectNewContact()\">Select</button> <button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"vm.cancel()\">Cancel</button></div></div>");$templateCache.put('../../media/ng/lib/lookup/programs/programs.html',"<div class=\"lookup-programs\"><div class=\"modal-header\"><b>Select a Program</b></div><div class=\"modal-body\"><div class=\"row\" ng-if=\"vm.showProgramCategory || vm.showFinanceMethod || vm.showInvestor\"><div class=\"col-md-4\" ng-if=\"vm.showProgramCategory\"><div class=\"form-group\"><label for=\"program-category\">Program Category</label> <select class=\"form-control input-sm\" ng-model=\"vm.category\" ng-change=\"vm.filterProgram()\" ng-options=\"o.los_program_category as o.friendly_name for o in vm.programCategory\" id=\"program-category\"></select></div></div><div class=\"col-md-4\" ng-if=\"vm.showFinanceMethod\"><div class=\"form-group\"><label for=\"finance-method\">Finance Method</label> <select class=\"form-control input-sm\" ng-model=\"vm.financeMethod\" ng-change=\"vm.filterProgram()\" ng-options=\"o as o for o in vm.financeMethodList\" id=\"finance-method\"></select></div></div><div class=\"col-md-4\" ng-if=\"vm.showInvestor\"><div class=\"form-group\"><label for=\"investor\">Investor</label> <select class=\"form-control input-sm\" ng-model=\"vm.investor\" ng-change=\"vm.filterProgram()\" ng-options=\"item as item.company for item in vm.investorList track by item.id\" id=\"investor\"></select></div></div></div><div class=\"row\" ng-if=\"vm.showProgramCategory || vm.showFinanceMethod || vm.showInvestor || vm.showTerms || vm.showPrepayPenalty\"><div class=\"col-md-4\" ng-if=\"vm.showPrepayPenalty\"><div class=\"form-group\"><label for=\"pre-pay-penalty\">Pre-pay Penalty</label> <select class=\"form-control input-sm\" ng-model=\"vm.prepayPenalty\" ng-change=\"vm.filterProgram()\" ng-options=\"o as o for o in vm.yesNo\" id=\"pre-pay-penalty\"></select></div></div><div class=\"col-md-4\" ng-if=\"vm.showTerms\"><div class=\"form-group\"><label for=\"term-from\">Term In Months</label><div class=\"form-inline\"><input type=\"text\" class=\"form-control term input-sm\" id=\"term-from\" ng-change=\"vm.filterProgram()\" ng-model=\"vm.termFrom\" mask=\"integer\"> To <input type=\"text\" class=\"form-control term input-sm\" id=\"term-to\" ng-change=\"vm.filterProgram()\" ng-model=\"vm.termTo\" mask=\"integer\"></div></div></div><div class=\"col-md-4 clear-section\" ng-if=\"vm.showProgramCategory || vm.showFinanceMethod || vm.showInvestor || vm.showTerms || vm.showPrepayPenalty\"><button class=\"btn btn-default btn-sm\" ng-click=\"vm.clearFilter()\">Clear</button></div></div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" type=\"button\" ng-disabled=\"!vm.selectedProgram.Program_ID\" ng-click=\"vm.select()\">Select</button> <button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"vm.cancel()\">Cancel</button></div><div><table class=\"table table-bordered table-hover table-striped\"><thead><tr><th>Program Name</th><th ng-if=\"vm.showInvestor\">Investor</th></tr></thead><tbody><tr ng-repeat=\"program in vm.programs\" class=\"record\" ng-class=\"{\r"+"\n"+"                            'info': vm.selectedProgram.Program_ID === program.Program_ID\r"+"\n"+"                        }\" ng-click=\"vm.selectProgram(program)\" ng-dblclick=\"vm.select()\"><td>{{ program.Friendly_Program_Name || program.Program_Name }}</td><td ng-if=\"vm.showInvestor\">{{ program.Company_Name }}</td></tr></tbody></table></div></div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" type=\"button\" ng-disabled=\"!vm.selectedProgram.Program_ID\" ng-click=\"vm.select()\">Select</button> <button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"vm.cancel()\">Cancel</button></div></div>");$templateCache.put('../../media/ng/lib/messenger/messenger.html',"<div id=\"myMessenger\"><div class=\"modal fade\" id=\"new_msgr_modal\" data-backdrop=\"static\"><div class=\"modal-dialog\" style=\"width: 770px;\"><div class=\"modal-content\"><div class=\"modal-header\"><b>Send Message to <i>{{currentContact.name}} ({{currentContact.email}})</i></b></div><div class=\"modal-body\" style=\"height: 310px\"><div class=\"form-group\"><p>Please enter your message below and click Send</p><textarea rows=\"12\" id=\"message-textarea-modal\" class=\"form-control\" ng-model=\"sendMessageBody\" placeholder=\"Enter Your Message\" style=\"background-color: #fff; width: 100%; padding: 5px\"></textarea></div></div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" ng-click=\"sendMessage()\" id=\"message-button-modal\"><span class=\"glyphicon glyphicon-envelope\"></span> Send</button> <button data-dismiss=\"modal\" class=\"btn btn-default btn-sm\" id=\"message-close-modal\"><span class=\"glyphicon glyphicon-remove\"></span> Close</button></div></div></div></div></div>");$templateCache.put('../../media/ng/lib/modal/alert/alert.html',"<div class=\"modal-alert\"><div class=\"modal-header\" ng-if=\"vm.resolve.title\">{{vm.resolve.title}}</div><div class=\"modal-body\"><div>{{vm.resolve.message}}</div></div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" ng-click=\"vm.close()\">Close</button></div></div>");$templateCache.put('../../media/ng/lib/modal/confirm/confirm.html',"<div class=\"modal-confirm\"><div class=\"modal-header\" ng-if=\"vm.resolve.title\">{{vm.resolve.title}}</div><div class=\"modal-body\">{{vm.resolve.message}}</div><div class=\"modal-footer\"><button class=\"btn btn-primary btn-sm\" ng-click=\"vm.yes()\">{{vm.resolve.yesLabel || 'Yes'}}</button> <button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"vm.no()\">{{vm.resolve.noLabel || 'No'}}</button></div></div>");$templateCache.put('../../media/ng/lib/modal/loading/loading.html',"<div class=\"modal-loading\"><div class=\"modal-body\"><div>{{vm.resolve.message}}</div><div><img ng-src=\"{{vm.staticFiles}}media/b2b/img/bigrotation2.gif\" alt=\"loading\"></div></div></div>");$templateCache.put('../../media/ng/lib/pagination/pagination.html',"<div class=\"app-pagination\"><nav aria-label=\"Page navigation\"><ul class=\"pagination pagination-sm\"><li ng-class=\"{\r"+"\n"+"                'disabled': vm.currentPage === 1\r"+"\n"+"              }\"><span ng-if=\"vm.currentPage === 1\">First</span> <a ng-if=\"vm.currentPage > 1\" href=\"javascript:void(0)\" ng-click=\"vm.handlePageClick(1)\" aria-label=\"Previous\"><span aria-hidden=\"true\">First</span></a></li><li ng-class=\"{\r"+"\n"+"                'disabled': vm.currentPage === 1\r"+"\n"+"              }\"><span ng-if=\"vm.currentPage === 1\">Previous</span> <a ng-if=\"vm.currentPage > 1\" href=\"javascript:void(0)\" ng-click=\"vm.handlePageClick(vm.currentPage-1)\" aria-label=\"Previous\"><span aria-hidden=\"true\">Previous</span></a></li><li ng-repeat=\"page in vm.pages track by $index\" ng-class=\"{\r"+"\n"+"                  'pagination-box': true,\r"+"\n"+"                  'active': page === vm.currentPage,\r"+"\n"+"                  'disabled': page === '...'\r"+"\n"+"              }\"><span ng-if=\"page === '...'\">...</span> <a href=\"javascript:void(0)\" ng-if=\"page !== '...'\" ng-click=\"vm.handlePageClick(page)\">{{ page }}</a></li><li ng-class=\"{\r"+"\n"+"              'disabled': vm.currentPage === vm.totalPageCount\r"+"\n"+"            }\"><span ng-if=\"vm.currentPage === vm.totalPageCount\">Next</span> <a ng-if=\"vm.currentPage < vm.totalPageCount\" href=\"javascript:void(0)\" aria-label=\"Next\" ng-click=\"vm.handlePageClick(vm.currentPage+1)\"><span aria-hidden=\"true\">Next</span></a></li><li ng-class=\"{\r"+"\n"+"              'disabled': vm.currentPage === vm.totalPageCount\r"+"\n"+"            }\"><span ng-if=\"vm.currentPage === vm.totalPageCount\">Last</span> <a ng-if=\"vm.currentPage < vm.totalPageCount\" href=\"javascript:void(0)\" ng-click=\"vm.handlePageClick(vm.totalPageCount)\" aria-label=\"Previous\"><span aria-hidden=\"true\">Last</span></a></li></ul></nav></div>");$templateCache.put('../../media/ng/lib/radiobutton/radiobutton.html',"<div class=\"radio-button\"><label ng-class=\"{\r"+"\n"+"             'list-type': !vm.boxType,\r"+"\n"+"             'box-type': vm.boxType,\r"+"\n"+"             'box-type-2': vm.boxType && vm.items.length === 2,\r"+"\n"+"             'box-type-3': vm.boxType && vm.items.length === 3,\r"+"\n"+"             'box-type-4': vm.boxType && vm.items.length === 4,\r"+"\n"+"             'box-type-5': vm.boxType && vm.items.length === 5\r"+"\n"+"           }\" ng-repeat=\"item in vm.items\"><input type=\"radio\" ng-model=\"vm.ngModel\" value=\"{{ item.value }}\" name=\"{{ vm.groupName }}\"> <span ng-bind-html=\"item.text | to_trusted\"></span></label></div><div class=\"clear-both\"></div>");}]);(function(){'use strict';angular.module('b2b.home.loanOfficerSection').component('loanOfficerSection',{bindings:{loanNumberId:'<'},controller:'LoanOfficerSectionController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/loan_officer_section/loan_officer_section.html'});})();(function(){'use strict';angular.module('b2b.home.loanOfficerSection').controller('LoanOfficerSectionController',LoanOfficerSectionController);LoanOfficerSectionController.$inject=['HttpService'];function LoanOfficerSectionController(HttpService){var vm=this;vm.data={};vm.baseUrl=BaseURL;// eslint-disable-line
vm.$onInit=onInit;vm.showLoanOfficerSection=false;/*
         * Initialize
         */function onInit(){loadLoanOfficerDetails();}/*
         * Load the Loan Officer Details
         */function loadLoanOfficerDetails(){var params={};if(vm.loanNumberId){params={loan_number_id:vm.loanNumberId};}HttpService.httpGet(vm.baseUrl+'getLoanOfficerDetails',params).then(function(response){if(response.success){vm.bios=response.data.bios;vm.showLoanOfficerSection=true;}else{vm.showLoanOfficerSection=false;}})["catch"](function(){vm.showLoanOfficerSection=false;});}}})();(function(){'use strict';angular.module('b2b.home.pipeline.expirePassword').component('expirePassword',{bindings:{resolve:'<',modalInstance:'<'},controller:'ExpirePasswordController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/pipeline/expire_password/expire_password.html'});})();(function(){'use strict';angular.module('b2b.home.pipeline.expirePassword').controller('ExpirePasswordController',ExpirePasswordController);ExpirePasswordController.$inject=[];function ExpirePasswordController(){var vm=this;vm.baseUrl=BaseURL;// eslint-disable-line
vm.close=close;vm.changePassword=changePassword;/*
         * Close the Modal
         */function close(){vm.modalInstance.close({});}/*
         * Go to Change Password Page
         */function changePassword(){window.location.href=vm.baseUrl+'change_password';}}})();(function(){'use strict';angular.module('b2b.home.pipeline').component('pipeline',{bindings:{},controller:'PipelineController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/pipeline/pipeline.html'});})();(function(){'use strict';angular.module('b2b.home.pipeline').controller('PipelineController',PipelineController);PipelineController.$inject=['HttpService','$uibModal'];function PipelineController(HttpService,$uibModal){var vm=this;vm.loading=false;vm.pipeline=[];vm.baseUrl=BaseURL;// eslint-disable-line
vm.staticFiles=STATIC_FILES;vm.$onInit=onInit;vm.openPrintPipeline=openPrintPipeline;/*
         * Initialize the component
         */function onInit(){vm.loading=true;getLoanPipeline();getUserDetails();initICE();}/*
         * Load Loan Pipeline
         * @result {Promise}
         */function getLoanPipeline(){HttpService.httpGet(vm.baseUrl+'getLoanPipeline').then(function(response){if(response.success){vm.pipeline=response.data.data;vm.pipelineId=response.data.pipeline_id;}})["catch"](function(){//TODO: Handle Exception
})["finally"](function(){vm.loading=false;});}/*
         * Login to ICE.
         * NOTE: Once all webservice call has been moved to PRICE, please remove this code
         * @result {Promise}
         */function initICE(){HttpService.httpGet(vm.baseUrl+'loginToICE')["catch"](function(){//TODO: Handle Exception
});}/*
         * Open Pipeline Print Modal
         */function openPrintPipeline(){$uibModal.open({component:'printPipeline',size:'md',keyboard:false,backdrop:'static',resolve:{pipeline:function pipeline(){return vm.pipeline;}}});}function getUserDetails(){HttpService.httpGet(vm.baseUrl+'getUserDetails').then(function(response){if(response.success){if(response.data.show_expire_password>0){showExpirePassword(response.data.show_expire_password);}else if(response.data.force_change_password){window.location.href=vm.baseUrl+'change_password';}}})["catch"](function(){//TODO: Handle Error
});}/*
         * Show the Expire Password Dialog
         * @param {Number} numberOfDaysToExpire
         */function showExpirePassword(_numberOfDaysToExpire){$uibModal.open({component:'expirePassword',size:'md',keyboard:false,backdrop:'static',resolve:{numberOfDaysToExpire:function numberOfDaysToExpire(){return _numberOfDaysToExpire;}}});}}})();(function(){'use strict';angular.module('b2b.home.pipeline.printPipeline').component('printPipeline',{bindings:{resolve:'<',modalInstance:'<'},controller:'PrintPipelineController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/pipeline/print_pipeline/print_pipeline.html'});})();(function(){'use strict';angular.module('b2b.home.pipeline.printPipeline').controller('PrintPipelineController',PrintPipelineController);PrintPipelineController.$inject=[];function PrintPipelineController(){var vm=this;vm.close=close;vm.print=print;/*
         * Close the Modal
         */function close(){vm.modalInstance.close({});}/*
         * Close the Modal
         */function print(){var openWindow=window.open();openWindow.document.write(document.getElementById('print-div').innerHTML);openWindow.document.close();openWindow.focus();openWindow.print();openWindow.close();}}})();(function(){'use strict';angular.module('b2b.home.tpo.changePassword').component('tpoChangePassword',{bindings:{},controller:'TPOChangePasswordController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/tpo/change_password/change_password.html'});})();(function(){'use strict';angular.module('b2b.home.tpo.changePassword').controller('TPOChangePasswordController',TPOChangePasswordController);TPOChangePasswordController.$inject=['HttpService','ModalService'];function TPOChangePasswordController(HttpService,ModalService){var vm=this;vm.changePassword=changePassword;vm.baseUrl=BaseURL;// eslint-disable-line
function changePassword(){if(!vm.oldPass){ModalService.showAlert('Change Password','Please enter old password');return;}else if(vm.newPass&&vm.newPass!==''&&vm.newPass!==vm.confirmPass){ModalService.showAlert('Change Password','Password does not match');return;}ModalService.showLoading('Changing Password... Please wait...');HttpService.httpPost(vm.baseUrl+'loggedInChangePassword',{old_pass:vm.oldPass,new_pass:vm.newPass,confirm_pass:vm.confirmPass}).then(function(){vm.oldPass=null;vm.newPass=null;vm.confirmPass=null;ModalService.showAlert('Change Password','Password successfully changed');})["catch"](function(response){ModalService.showAlert('Change Password',response.data);})["finally"](function(){ModalService.hideLoading();});}}})();(function(){'use strict';angular.module('b2b.home.tpo.contactInfo').component('tpoContactInfo',{bindings:{},controller:'TPOContactInfoController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/tpo/contact_info/contact_info.html'});})();(function(){'use strict';angular.module('b2b.home.tpo.contactInfo').controller('TPOContactInfoController',TPOContactInfoController);TPOContactInfoController.$inject=['HttpService','ModalService'];function TPOContactInfoController(HttpService,ModalService){var vm=this;vm.$onInit=onInit;vm.disabled_form=true;vm.showInterfaceCredentials=false;vm.showUserList=false;vm.showInterfaceCredentialsTab=false;vm.showTabs=false;vm.baseUrl=BaseURL;// eslint-disable-line
function onInit(){getUserContactInfo();}function getUserContactInfo(){ModalService.showLoading('Loading... Please wait...');HttpService.httpGet(vm.baseUrl+'getUserContactInfo').then(function(response){if(response.success){vm.showTabs=true;vm.contact=response.data;vm.isTpoAdmin=response.data.is_tpo_admin;if(response.data.is_contact){vm.showInterfaceCredentialsTab=true;}}})["finally"](function(){ModalService.hideLoading();});}}})();(function(){'use strict';angular.module('b2b.home.tpo.interfaceCredentials').component('tpoInterfaceCredentials',{bindings:{},controller:'TPOInterfaceCredentialsController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/tpo/interface_credentials/interface_credentials.html'});})();(function(){'use strict';angular.module('b2b.home.tpo.interfaceCredentials').controller('TPOInterfaceCredentialsController',TPOInterfaceCredentialsController);TPOInterfaceCredentialsController.$inject=['HttpService','ModalService'];function TPOInterfaceCredentialsController(HttpService,ModalService){var vm=this;vm.$onInit=onInit;vm.save=save;vm.showSaveButton=showSaveButton;vm.disableSaveButton=disableSaveButton;vm.baseUrl=BaseURL;// eslint-disable-line
function onInit(){loadInterfaceCredentials();}function loadInterfaceCredentials(){HttpService.httpGet(vm.baseUrl+'getInterfaceCredentials').then(function(response){vm.data=response.data;});}function save(){var postData=[],mismatchPassword=[];angular.forEach(vm.data,function(credentials){angular.forEach(credentials,function(credential){if(credential.IsPasswordField){credential.HasError=false;if(credential.DataNameValue&&credential.DataNameValue===credential.ConfirmPassword){postData.push({InterfaceName:credential.InterfaceType,DataName:credential.DataName,Value:credential.DataNameValue});}else if((credential.DataNameValue||credential.ConfirmPassword)&&credential.DataNameValue!==credential.ConfirmPassword){mismatchPassword.push(credential.InterfaceType);credential.HasError=true;}}});});if(mismatchPassword.length>0){ModalService.showAlert('Interface Credentails','Password does not match for '+mismatchPassword.join(','));}else if(postData.length>0){ModalService.showLoading('Saving... Please wait...');HttpService.httpPost(vm.baseUrl+'saveInterfaceCredentials',{data:postData}).then(function(response){ModalService.hideLoading();if(response.success&&response.data.length>0){ModalService.showAlert('Interface Credential','Password successfully saved for '+response.data.join(','));}});}else{ModalService.showAlert('Interface Credential','Please enter password');}}function showSaveButton(){return vm.data&&Object.keys(vm.data).length>0;}function disableSaveButton(){if(vm.data){/*
                vm.data.forEach(function(credentials) {
                    credentials.forEach(function(credential) {
                        if (credential.IsPasswordField && (credential.DataNameValue || credential.ConfirmPassword)) {
                            return true;
                        }
                    });
                });
                */}return false;}}})();(function(){'use strict';angular.module('b2b.home.tpo.statusForm').component('tpoStatusForm',{bindings:{resolve:'<',modalInstance:'<'},controller:'TPOStatusFormController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/tpo/user_list/status_form/status_form.html'});})();(function(){'use strict';angular.module('b2b.home.tpo.statusForm').controller('TPOStatusFormController',TPOStatusFormController);TPOStatusFormController.$inject=['ModalService','HttpService'];function TPOStatusFormController(ModalService,HttpService){var vm=this;vm.cancel=cancel;vm.getValue=getValue;vm.$onInit=onInit;vm.status=[];vm.baseUrl=BaseURL;// eslint-disable-line
function cancel(){vm.modalInstance.dismiss('cancel');}function onInit(){ModalService.showLoading('Loading... Please wait...');HttpService.httpGet(vm.baseUrl+'getTPOQueueData',{contact_id:vm.resolve.user.ContactID}).then(function(response){if(response.success){vm.status=response.data.filter(function(itm){return itm.ContactID==vm.resolve.user.ContactID;});}})["finally"](function(){ModalService.hideLoading();});}function getValue(key,value){if(key==='Groups'){var groups=[];value=value.split(',');if(Array.isArray(vm.resolve.contactGroups)&&Array.isArray(value)&&value.length>0){value.forEach(function(val){var group=vm.resolve.contactGroups.filter(function(group){if(val.hasOwnProperty('GroupID')){return group.GroupID===val.GroupID;}else{return group.GroupID===val;}});if(group){groups.push(group.GroupName);}});}return groups.join(',');}else if(key==='TPORoleID'){var roleName='';if(Array.isArray(vm.resolve.roles)){value=parseInt(value,10);vm.resolve.roles.forEach(function(role){if(role.id===value){roleName=role.value;}});}return roleName;}return value;}}})();(function(){'use strict';angular.module('b2b.home.tpo.submit').component('tpoSubmit',{bindings:{resolve:'<',modalInstance:'<'},controller:'TPOSubmitController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/tpo/user_list/submit/submit.html'});})();(function(){'use strict';angular.module('b2b.home.tpo.submit').controller('TPOSubmitController',TPOSubmitController);TPOSubmitController.$inject=[];function TPOSubmitController(){var vm=this;vm.cancel=cancel;vm.submit=submit;vm.formatArray=formatArray;vm.getValue=getValue;vm.$onInit=onInit;function onInit(){vm.showEditedUsers=Object.keys(vm.resolve.editedUsers).length>0;}function submit(){vm.modalInstance.close({action:'save'});}function cancel(){vm.modalInstance.dismiss('cancel');}function formatArray(arr){return arr.join(',');}//TODO: Move this to a service
function getValue(key,value){if(key==='Groups'){var groups=[];if(Array.isArray(vm.resolve.contactGroups)&&Array.isArray(value)&&value.length>0){value.forEach(function(val){var group=vm.resolve.contactGroups.filter(function(group){if(val.hasOwnProperty('GroupID')){return group.GroupID===val.GroupID;}else{return group.GroupID===val;}});if(group.length>0){groups.push(group[0].GroupName);}});}return groups.join(',');}else if(key==='Member'){var members=[];if(Array.isArray(vm.resolve.contactMember)&&Array.isArray(value)&&value.length>0){value.forEach(function(val){var member=vm.resolve.contactMember.filter(function(member){if(val.hasOwnProperty('MemberID')){return member.MemberID===val.MemberID;}else{return member.MemberID===val;}});if(member.length>0){members.push(member[0].MemberName);}});}return members.join(',');}else if(key==='TPORoleID'){var roleName='';if(Array.isArray(vm.resolve.roles)){vm.resolve.roles.forEach(function(role){if(role.id===value){roleName=role.value;}});}return roleName;}return value;}}})();(function(){'use strict';angular.module('b2b.home.tpo.userForm').component('tpoUserForm',{bindings:{resolve:'<',modalInstance:'<'},controller:'TPOUserFormController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/tpo/user_list/user_form/user_form.html'});})();(function(){'use strict';angular.module('b2b.home.tpo.userForm').controller('TPOUserFormController',TPOUserFormController);TPOUserFormController.$inject=['$scope','ModalService','HttpService','$q'];function TPOUserFormController($scope,ModalService,HttpService,$q){var vm=this;vm.cancel=cancel;vm.save=save;vm.isRequired=isRequired;vm.isValid=isValid;vm.$onInit=onInit;vm.validateUserName=validateUserName;vm.testUsername=testUsername;vm.isNew=false;vm.baseUrl=BaseURL;// eslint-disable-line
vm.isIncomplete=isIncomplete;vm.incompleteFields=false;function onInit(){vm.userForm=angular.copy(vm.resolve.user);if(!vm.userForm){vm.isNew=true;vm.modalTitle='Add New User';vm.userForm={ContactID:0,FirstName:'',LastName:'',EmailAddress:'',Title:'',Phone:'',UserName:'',TPORoleID:undefined,ContactType:'Broker',Groups:[]};}else{vm.modalTitle='Edit User';if(vm.resolve.editedUsers.hasOwnProperty(vm.userForm.ContactID)){vm.userForm=angular.extend(vm.userForm,vm.resolve.editedUsers[vm.userForm.ContactID].changes);}HttpService.httpGet(vm.baseUrl+'getUserGroups',{userID:vm.userForm.ContactID}).then(function(response){if(response.success){vm.userForm.Groups=response.data;}});HttpService.httpGet(vm.baseUrl+'getUserMember',{userID:vm.userForm.ContactID}).then(function(response){if(response.success){vm.userForm.Member=response.data;}});}vm.resolve.roles.forEach(function(role){if(vm.userForm.TPORoleID===role.id){vm.TPORoleID=role;}});}function cancel(){vm.modalInstance.dismiss('cancel');}function unmask(value){return value.replace(/\(/g,'').replace(/\)/g,'').replace(/_/g,'').replace(/-/g,'');}function save(){if(isIncomplete()){ModalService.showAlert('Incomplete Fields','Please complete the required fields');}else{if(vm.isNew){checkUsername(vm.userForm.FirstName,vm.userForm.LastName,vm.userForm.UserName).then(function(response){if(response.success){if(vm.userForm.UserName!==response.data){ModalService.showConfirm('Username','Username "'+vm.userForm.UserName+'" already exist. Change username to '+response.data+'?').then(function(answer){if(answer){vm.userForm.UserName=response.data;submit();}else{ModalService.showAlert('Username','Please enter a new username');}});}else{submit();}}});}else{submit();}}}function submit(){var changes={};vm.userForm.TPORoleID=vm.TPORoleID.id;angular.forEach(vm.userForm,function(value,key){if(key==='Phone'||key==='Mobile'){changes[key]=unmask(value);}else{changes[key]=value;}});vm.modalInstance.close({isNew:vm.isNew,action:'save',data:{changes:changes}});}function isRequired(fieldName){return vm.requiredFields.indexOf(fieldName)>=0;}function isIncomplete(){vm.incompleteFields=vm.userForm.ContactType&&vm.userForm.ContactType!==''&&vm.userForm.ContactType.toUpperCase()==='BROKER'&&(!vm.userForm.NMLSID||vm.userForm.NMLSID==='');return vm.incompleteFields;}function isValid(){return vm.userForm.FirstName&&vm.userForm.LastName&&vm.userForm.EmailAddress&&vm.userForm.Title&&vm.userForm.Phone&&vm.userForm.UserName&&vm.TPORoleID&&$scope.userForm.EmailAddress.$valid;}function validateUserName(){if(vm.isNew){if(!vm.userForm.UserName&&vm.userForm.FirstName&&vm.userForm.LastName){vm.userForm.UserName=(vm.userForm.FirstName.charAt(0)+vm.userForm.LastName).toLowerCase();}}}function testUsername(firstname,lastname,username){if(username){checkUsername(firstname,lastname,username).then(function(response){if(response.success){if(username!==response.data){ModalService.showConfirm('Username','Username "'+username+'" already exist. Change username to '+response.data+'?').then(function(answer){if(answer){vm.userForm.UserName=response.data;}});}else{ModalService.showAlert('Username',username+' is available');}}});}else{ModalService.showAlert('Username','Please enter a usename');}}function checkUsername(firstName,lastName,username){return $q(function(resolve){ModalService.showLoading('Validating Username...');HttpService.httpGet(vm.baseUrl+'validateUsername',{first_name:firstName,last_name:lastName,username:username}).then(function(response){resolve(response);})["finally"](function(){ModalService.hideLoading();});});}}})();(function(){'use strict';angular.module('b2b.home.tpo.userList').component('tpoUserList',{bindings:{},controller:'TPOUserListController',controllerAs:'vm',templateUrl:'../../media/ng/b2b/home/tpo/user_list/user_list.html'});})();(function(){'use strict';angular.module('b2b.home.tpo.userList').controller('TPOUserListController',TPOUserListController);TPOUserListController.$inject=['$uibModal','ModalService','HttpService'];function TPOUserListController($uibModal,ModalService,HttpService){var vm=this;vm.$onInit=onInit;vm.openUserForm=openUserForm;vm.showPendingStatus=showPendingStatus;vm.activateContact=activateContact;vm.deactivateContact=deactivateContact;vm.sortBy=sortBy;vm.load=load;vm.submitAll=submitAll;vm.reset=reset;vm.isSubmitEnabled=isSubmitEnabled;vm.removeNewUser=removeNewUser;vm.orderBy='FirstName';vm.reverse=false;vm.tableHeaders=['Name','Title','Phone','Email','NMLS','Status'];var _roles=[],_contactTypes=[],_contactGroups,_contactMember;vm.editedUsers={};vm.newUsers=[];vm.baseUrl=BaseURL;// eslint-disable-line
function onInit(){load();}function load(){ModalService.showLoading('Loading... Please wait...');HttpService.httpGet("".concat(vm.baseUrl,"getTPOSettings?").concat(Math.random())).then(function(response){if(response.success){vm.users=response.data.members;_roles=response.data.roles;_contactTypes=response.data.contact_types;vm.access=response.data.access;_contactGroups=response.data.contact_groups;_contactMember=response.data.contact_member;}})["finally"](function(){ModalService.hideLoading();});}function openUserForm(_user){var modalInstance=$uibModal.open({component:'tpoUserForm',size:'lg',keyboard:false,backdrop:'static',resolve:{user:function user(){return _user;},editedUsers:function editedUsers(){return vm.editedUsers;},roles:function roles(){return _roles;},contactTypes:function contactTypes(){return _contactTypes;},contactGroups:function contactGroups(){return _contactGroups;},contactMember:function contactMember(){return _contactMember;}}});modalInstance.result.then(function(result){if(result.action==='save'){if(result.isNew){vm.newUsers.push({changes:result.data.changes});}else{addEditedUser(_user);vm.editedUsers[_user.ContactID].changes=angular.extend(vm.editedUsers[_user.ContactID].changes,result.data.changes);for(var property in vm.editedUsers[_user.ContactID].changes){if(vm.editedUsers[_user.ContactID].changes.hasOwnProperty(property)){var origVal=vm.editedUsers[_user.ContactID].changes[property];var newVal=_user[property];if(property==='Groups'){origVal=origVal.map(function(val){return val.GroupID;}).join();newVal=newVal.join(',');}if(origVal===newVal){delete vm.editedUsers[_user.ContactID].changes[property];if(vm.editedUsers[_user.ContactID].hasOwnProperty('changes')){if(Object.keys(vm.editedUsers[_user.ContactID].changes).length===0){delete vm.editedUsers[_user.ContactID];}}}}}}}});}function showPendingStatus(_user2){$uibModal.open({component:'tpoStatusForm',size:'lg',keyboard:false,backdrop:'static',resolve:{user:function user(){return _user2;},roles:function roles(){return _roles;},contactGroups:function contactGroups(){return _contactGroups;},contactMember:function contactMember(){return _contactMember;}}});}function addEditedUser(user){if(!vm.editedUsers.hasOwnProperty(user.ContactID)){vm.editedUsers[user.ContactID]={userInfo:user,changes:{}};}}function activateContact(user){addEditedUser(user);vm.editedUsers[user.ContactID].changes.PreviousContact='N';}function deactivateContact(user){addEditedUser(user);vm.editedUsers[user.ContactID].changes.PreviousContact='Y';}function sortBy(fieldName){if(fieldName==='Name'){fieldName='FirstName';}if(vm.orderBy===fieldName){vm.reverse=!vm.reverse;}vm.orderBy=fieldName;}function setContactQueue(){ModalService.showLoading('Processing... Please wait...');var edited=[],newUsers=[];angular.forEach(vm.editedUsers,function(user){if(user.changes&&Object.keys(user.changes).length>0){if(user.changes.hasOwnProperty('Groups')){user.changes.Groups=user.changes.Groups.map(function(group){return group.GroupID;});if(user.changes.Groups.length===0){user.changes.Groups.push(-1);}}if(user.changes.hasOwnProperty('Member')){user.changes.Member=user.changes.Member.map(function(member){return member.MemberID;});if(user.changes.Member.length===0){user.changes.Member.push(-1);}}edited.push({contact_id:user.userInfo.ContactID,changes:user.changes});}});angular.forEach(vm.newUsers,function(user){if(user.changes&&Object.keys(user.changes).length>0){if(user.changes.hasOwnProperty('Groups')){user.changes.Groups=user.changes.Groups.map(function(group){return group.GroupID;});}if(user.changes.hasOwnProperty('Member')){user.changes.Member=user.changes.Member.map(function(member){return member.MemberID;});}newUsers.push({contact_id:0,changes:user.changes});}});HttpService.httpPost(vm.baseUrl+'setContactQueue',{edit_users:edited,new_users:newUsers}).then(function(response){if(response.success){reset();ModalService.showAlert('User','Your request has been successfully submitted. Please click the status link to check the status of your request');load();}})["finally"](function(){ModalService.hideLoading();});}function submitAll(){var modalInstance=$uibModal.open({component:'tpoSubmit',size:'lg',keyboard:false,backdrop:'static',resolve:{editedUsers:function editedUsers(){return vm.editedUsers;},newUsers:function newUsers(){return vm.newUsers;},roles:function roles(){return _roles;},contactGroups:function contactGroups(){return _contactGroups;},contactMember:function contactMember(){return _contactMember;}}});modalInstance.result.then(function(result){if(result.action==='save'){setContactQueue();}});}function reset(){vm.editedUsers={};vm.newUsers=[];}function isSubmitEnabled(){return vm.newUsers.length>0||Object.keys(vm.editedUsers).length>0;}function removeNewUser(key){delete vm.newUsers[key];}}})();
